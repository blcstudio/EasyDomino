/* automatically generated by JSCoverage - do not edit */
try {
  if (typeof top === 'object' && top !== null && typeof top.opener === 'object' && top.opener !== null) {
    // this is a browser window that was opened from another window

    if (! top.opener._$jscoverage) {
      top.opener._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null) {
    // this is a browser window

    try {
      if (typeof top.opener === 'object' && top.opener !== null && top.opener._$jscoverage) {
        top._$jscoverage = top.opener._$jscoverage;
      }
    }
    catch (e) {}

    if (! top._$jscoverage) {
      top._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null && top._$jscoverage) {
    _$jscoverage = top._$jscoverage;
  }
}
catch (e) {}
if (typeof _$jscoverage !== 'object') {
  _$jscoverage = {};
}
if (! _$jscoverage['easy_domino_play.js']) {
  _$jscoverage['easy_domino_play.js'] = [];
  _$jscoverage['easy_domino_play.js'][10] = 0;
  _$jscoverage['easy_domino_play.js'][12] = 0;
  _$jscoverage['easy_domino_play.js'][18] = 0;
  _$jscoverage['easy_domino_play.js'][20] = 0;
  _$jscoverage['easy_domino_play.js'][22] = 0;
  _$jscoverage['easy_domino_play.js'][24] = 0;
  _$jscoverage['easy_domino_play.js'][25] = 0;
  _$jscoverage['easy_domino_play.js'][27] = 0;
  _$jscoverage['easy_domino_play.js'][29] = 0;
  _$jscoverage['easy_domino_play.js'][31] = 0;
  _$jscoverage['easy_domino_play.js'][33] = 0;
  _$jscoverage['easy_domino_play.js'][38] = 0;
  _$jscoverage['easy_domino_play.js'][39] = 0;
  _$jscoverage['easy_domino_play.js'][41] = 0;
  _$jscoverage['easy_domino_play.js'][42] = 0;
  _$jscoverage['easy_domino_play.js'][44] = 0;
  _$jscoverage['easy_domino_play.js'][50] = 0;
  _$jscoverage['easy_domino_play.js'][52] = 0;
  _$jscoverage['easy_domino_play.js'][54] = 0;
  _$jscoverage['easy_domino_play.js'][56] = 0;
  _$jscoverage['easy_domino_play.js'][58] = 0;
  _$jscoverage['easy_domino_play.js'][61] = 0;
  _$jscoverage['easy_domino_play.js'][63] = 0;
  _$jscoverage['easy_domino_play.js'][65] = 0;
  _$jscoverage['easy_domino_play.js'][66] = 0;
  _$jscoverage['easy_domino_play.js'][67] = 0;
  _$jscoverage['easy_domino_play.js'][70] = 0;
  _$jscoverage['easy_domino_play.js'][71] = 0;
  _$jscoverage['easy_domino_play.js'][72] = 0;
  _$jscoverage['easy_domino_play.js'][73] = 0;
  _$jscoverage['easy_domino_play.js'][77] = 0;
  _$jscoverage['easy_domino_play.js'][78] = 0;
  _$jscoverage['easy_domino_play.js'][81] = 0;
  _$jscoverage['easy_domino_play.js'][83] = 0;
  _$jscoverage['easy_domino_play.js'][84] = 0;
  _$jscoverage['easy_domino_play.js'][85] = 0;
  _$jscoverage['easy_domino_play.js'][86] = 0;
  _$jscoverage['easy_domino_play.js'][87] = 0;
  _$jscoverage['easy_domino_play.js'][91] = 0;
  _$jscoverage['easy_domino_play.js'][93] = 0;
  _$jscoverage['easy_domino_play.js'][96] = 0;
  _$jscoverage['easy_domino_play.js'][98] = 0;
  _$jscoverage['easy_domino_play.js'][99] = 0;
  _$jscoverage['easy_domino_play.js'][101] = 0;
  _$jscoverage['easy_domino_play.js'][103] = 0;
  _$jscoverage['easy_domino_play.js'][104] = 0;
  _$jscoverage['easy_domino_play.js'][105] = 0;
  _$jscoverage['easy_domino_play.js'][107] = 0;
  _$jscoverage['easy_domino_play.js'][108] = 0;
  _$jscoverage['easy_domino_play.js'][111] = 0;
  _$jscoverage['easy_domino_play.js'][112] = 0;
  _$jscoverage['easy_domino_play.js'][113] = 0;
  _$jscoverage['easy_domino_play.js'][115] = 0;
  _$jscoverage['easy_domino_play.js'][117] = 0;
  _$jscoverage['easy_domino_play.js'][118] = 0;
  _$jscoverage['easy_domino_play.js'][120] = 0;
  _$jscoverage['easy_domino_play.js'][122] = 0;
  _$jscoverage['easy_domino_play.js'][124] = 0;
  _$jscoverage['easy_domino_play.js'][125] = 0;
  _$jscoverage['easy_domino_play.js'][126] = 0;
  _$jscoverage['easy_domino_play.js'][128] = 0;
  _$jscoverage['easy_domino_play.js'][130] = 0;
  _$jscoverage['easy_domino_play.js'][133] = 0;
  _$jscoverage['easy_domino_play.js'][134] = 0;
  _$jscoverage['easy_domino_play.js'][135] = 0;
  _$jscoverage['easy_domino_play.js'][136] = 0;
  _$jscoverage['easy_domino_play.js'][139] = 0;
  _$jscoverage['easy_domino_play.js'][141] = 0;
  _$jscoverage['easy_domino_play.js'][142] = 0;
  _$jscoverage['easy_domino_play.js'][143] = 0;
  _$jscoverage['easy_domino_play.js'][144] = 0;
  _$jscoverage['easy_domino_play.js'][145] = 0;
  _$jscoverage['easy_domino_play.js'][146] = 0;
  _$jscoverage['easy_domino_play.js'][148] = 0;
  _$jscoverage['easy_domino_play.js'][151] = 0;
  _$jscoverage['easy_domino_play.js'][153] = 0;
  _$jscoverage['easy_domino_play.js'][154] = 0;
  _$jscoverage['easy_domino_play.js'][155] = 0;
  _$jscoverage['easy_domino_play.js'][156] = 0;
  _$jscoverage['easy_domino_play.js'][158] = 0;
  _$jscoverage['easy_domino_play.js'][160] = 0;
  _$jscoverage['easy_domino_play.js'][162] = 0;
  _$jscoverage['easy_domino_play.js'][164] = 0;
  _$jscoverage['easy_domino_play.js'][169] = 0;
  _$jscoverage['easy_domino_play.js'][171] = 0;
  _$jscoverage['easy_domino_play.js'][172] = 0;
  _$jscoverage['easy_domino_play.js'][175] = 0;
  _$jscoverage['easy_domino_play.js'][176] = 0;
  _$jscoverage['easy_domino_play.js'][177] = 0;
  _$jscoverage['easy_domino_play.js'][179] = 0;
  _$jscoverage['easy_domino_play.js'][180] = 0;
  _$jscoverage['easy_domino_play.js'][181] = 0;
  _$jscoverage['easy_domino_play.js'][186] = 0;
  _$jscoverage['easy_domino_play.js'][187] = 0;
  _$jscoverage['easy_domino_play.js'][188] = 0;
  _$jscoverage['easy_domino_play.js'][190] = 0;
  _$jscoverage['easy_domino_play.js'][191] = 0;
  _$jscoverage['easy_domino_play.js'][192] = 0;
  _$jscoverage['easy_domino_play.js'][193] = 0;
  _$jscoverage['easy_domino_play.js'][194] = 0;
  _$jscoverage['easy_domino_play.js'][196] = 0;
  _$jscoverage['easy_domino_play.js'][198] = 0;
  _$jscoverage['easy_domino_play.js'][199] = 0;
  _$jscoverage['easy_domino_play.js'][200] = 0;
  _$jscoverage['easy_domino_play.js'][201] = 0;
  _$jscoverage['easy_domino_play.js'][202] = 0;
  _$jscoverage['easy_domino_play.js'][203] = 0;
  _$jscoverage['easy_domino_play.js'][206] = 0;
  _$jscoverage['easy_domino_play.js'][207] = 0;
  _$jscoverage['easy_domino_play.js'][208] = 0;
  _$jscoverage['easy_domino_play.js'][209] = 0;
  _$jscoverage['easy_domino_play.js'][210] = 0;
  _$jscoverage['easy_domino_play.js'][211] = 0;
  _$jscoverage['easy_domino_play.js'][214] = 0;
  _$jscoverage['easy_domino_play.js'][215] = 0;
  _$jscoverage['easy_domino_play.js'][217] = 0;
  _$jscoverage['easy_domino_play.js'][221] = 0;
  _$jscoverage['easy_domino_play.js'][222] = 0;
  _$jscoverage['easy_domino_play.js'][227] = 0;
  _$jscoverage['easy_domino_play.js'][229] = 0;
  _$jscoverage['easy_domino_play.js'][231] = 0;
  _$jscoverage['easy_domino_play.js'][232] = 0;
  _$jscoverage['easy_domino_play.js'][234] = 0;
  _$jscoverage['easy_domino_play.js'][237] = 0;
  _$jscoverage['easy_domino_play.js'][238] = 0;
  _$jscoverage['easy_domino_play.js'][239] = 0;
  _$jscoverage['easy_domino_play.js'][241] = 0;
  _$jscoverage['easy_domino_play.js'][242] = 0;
  _$jscoverage['easy_domino_play.js'][243] = 0;
  _$jscoverage['easy_domino_play.js'][245] = 0;
  _$jscoverage['easy_domino_play.js'][246] = 0;
  _$jscoverage['easy_domino_play.js'][247] = 0;
  _$jscoverage['easy_domino_play.js'][248] = 0;
  _$jscoverage['easy_domino_play.js'][249] = 0;
  _$jscoverage['easy_domino_play.js'][251] = 0;
  _$jscoverage['easy_domino_play.js'][252] = 0;
  _$jscoverage['easy_domino_play.js'][255] = 0;
  _$jscoverage['easy_domino_play.js'][256] = 0;
  _$jscoverage['easy_domino_play.js'][257] = 0;
  _$jscoverage['easy_domino_play.js'][259] = 0;
  _$jscoverage['easy_domino_play.js'][260] = 0;
  _$jscoverage['easy_domino_play.js'][261] = 0;
  _$jscoverage['easy_domino_play.js'][262] = 0;
  _$jscoverage['easy_domino_play.js'][263] = 0;
  _$jscoverage['easy_domino_play.js'][265] = 0;
  _$jscoverage['easy_domino_play.js'][266] = 0;
  _$jscoverage['easy_domino_play.js'][268] = 0;
  _$jscoverage['easy_domino_play.js'][269] = 0;
  _$jscoverage['easy_domino_play.js'][270] = 0;
  _$jscoverage['easy_domino_play.js'][271] = 0;
  _$jscoverage['easy_domino_play.js'][274] = 0;
  _$jscoverage['easy_domino_play.js'][276] = 0;
  _$jscoverage['easy_domino_play.js'][277] = 0;
  _$jscoverage['easy_domino_play.js'][278] = 0;
  _$jscoverage['easy_domino_play.js'][279] = 0;
  _$jscoverage['easy_domino_play.js'][280] = 0;
  _$jscoverage['easy_domino_play.js'][281] = 0;
  _$jscoverage['easy_domino_play.js'][282] = 0;
  _$jscoverage['easy_domino_play.js'][283] = 0;
  _$jscoverage['easy_domino_play.js'][285] = 0;
  _$jscoverage['easy_domino_play.js'][286] = 0;
  _$jscoverage['easy_domino_play.js'][288] = 0;
  _$jscoverage['easy_domino_play.js'][289] = 0;
  _$jscoverage['easy_domino_play.js'][290] = 0;
  _$jscoverage['easy_domino_play.js'][292] = 0;
  _$jscoverage['easy_domino_play.js'][300] = 0;
  _$jscoverage['easy_domino_play.js'][301] = 0;
  _$jscoverage['easy_domino_play.js'][305] = 0;
  _$jscoverage['easy_domino_play.js'][306] = 0;
  _$jscoverage['easy_domino_play.js'][307] = 0;
  _$jscoverage['easy_domino_play.js'][308] = 0;
  _$jscoverage['easy_domino_play.js'][309] = 0;
  _$jscoverage['easy_domino_play.js'][310] = 0;
  _$jscoverage['easy_domino_play.js'][311] = 0;
  _$jscoverage['easy_domino_play.js'][312] = 0;
  _$jscoverage['easy_domino_play.js'][313] = 0;
  _$jscoverage['easy_domino_play.js'][314] = 0;
  _$jscoverage['easy_domino_play.js'][315] = 0;
  _$jscoverage['easy_domino_play.js'][319] = 0;
  _$jscoverage['easy_domino_play.js'][321] = 0;
  _$jscoverage['easy_domino_play.js'][323] = 0;
  _$jscoverage['easy_domino_play.js'][325] = 0;
  _$jscoverage['easy_domino_play.js'][327] = 0;
  _$jscoverage['easy_domino_play.js'][329] = 0;
  _$jscoverage['easy_domino_play.js'][330] = 0;
  _$jscoverage['easy_domino_play.js'][333] = 0;
  _$jscoverage['easy_domino_play.js'][334] = 0;
  _$jscoverage['easy_domino_play.js'][335] = 0;
  _$jscoverage['easy_domino_play.js'][341] = 0;
  _$jscoverage['easy_domino_play.js'][342] = 0;
  _$jscoverage['easy_domino_play.js'][343] = 0;
  _$jscoverage['easy_domino_play.js'][350] = 0;
  _$jscoverage['easy_domino_play.js'][351] = 0;
  _$jscoverage['easy_domino_play.js'][352] = 0;
  _$jscoverage['easy_domino_play.js'][353] = 0;
  _$jscoverage['easy_domino_play.js'][359] = 0;
  _$jscoverage['easy_domino_play.js'][367] = 0;
  _$jscoverage['easy_domino_play.js'][368] = 0;
  _$jscoverage['easy_domino_play.js'][371] = 0;
  _$jscoverage['easy_domino_play.js'][372] = 0;
  _$jscoverage['easy_domino_play.js'][373] = 0;
  _$jscoverage['easy_domino_play.js'][376] = 0;
  _$jscoverage['easy_domino_play.js'][377] = 0;
  _$jscoverage['easy_domino_play.js'][379] = 0;
  _$jscoverage['easy_domino_play.js'][381] = 0;
  _$jscoverage['easy_domino_play.js'][382] = 0;
  _$jscoverage['easy_domino_play.js'][385] = 0;
  _$jscoverage['easy_domino_play.js'][386] = 0;
  _$jscoverage['easy_domino_play.js'][388] = 0;
  _$jscoverage['easy_domino_play.js'][389] = 0;
  _$jscoverage['easy_domino_play.js'][390] = 0;
  _$jscoverage['easy_domino_play.js'][391] = 0;
  _$jscoverage['easy_domino_play.js'][392] = 0;
  _$jscoverage['easy_domino_play.js'][394] = 0;
  _$jscoverage['easy_domino_play.js'][395] = 0;
  _$jscoverage['easy_domino_play.js'][396] = 0;
  _$jscoverage['easy_domino_play.js'][397] = 0;
  _$jscoverage['easy_domino_play.js'][398] = 0;
  _$jscoverage['easy_domino_play.js'][399] = 0;
  _$jscoverage['easy_domino_play.js'][400] = 0;
  _$jscoverage['easy_domino_play.js'][402] = 0;
  _$jscoverage['easy_domino_play.js'][404] = 0;
  _$jscoverage['easy_domino_play.js'][405] = 0;
  _$jscoverage['easy_domino_play.js'][406] = 0;
  _$jscoverage['easy_domino_play.js'][407] = 0;
  _$jscoverage['easy_domino_play.js'][409] = 0;
  _$jscoverage['easy_domino_play.js'][410] = 0;
  _$jscoverage['easy_domino_play.js'][411] = 0;
  _$jscoverage['easy_domino_play.js'][412] = 0;
  _$jscoverage['easy_domino_play.js'][413] = 0;
  _$jscoverage['easy_domino_play.js'][421] = 0;
  _$jscoverage['easy_domino_play.js'][422] = 0;
  _$jscoverage['easy_domino_play.js'][423] = 0;
  _$jscoverage['easy_domino_play.js'][424] = 0;
  _$jscoverage['easy_domino_play.js'][425] = 0;
  _$jscoverage['easy_domino_play.js'][426] = 0;
  _$jscoverage['easy_domino_play.js'][427] = 0;
  _$jscoverage['easy_domino_play.js'][428] = 0;
  _$jscoverage['easy_domino_play.js'][432] = 0;
  _$jscoverage['easy_domino_play.js'][433] = 0;
  _$jscoverage['easy_domino_play.js'][435] = 0;
  _$jscoverage['easy_domino_play.js'][436] = 0;
  _$jscoverage['easy_domino_play.js'][437] = 0;
  _$jscoverage['easy_domino_play.js'][438] = 0;
  _$jscoverage['easy_domino_play.js'][439] = 0;
  _$jscoverage['easy_domino_play.js'][440] = 0;
  _$jscoverage['easy_domino_play.js'][441] = 0;
  _$jscoverage['easy_domino_play.js'][443] = 0;
  _$jscoverage['easy_domino_play.js'][444] = 0;
  _$jscoverage['easy_domino_play.js'][446] = 0;
  _$jscoverage['easy_domino_play.js'][447] = 0;
  _$jscoverage['easy_domino_play.js'][449] = 0;
  _$jscoverage['easy_domino_play.js'][451] = 0;
  _$jscoverage['easy_domino_play.js'][452] = 0;
  _$jscoverage['easy_domino_play.js'][453] = 0;
  _$jscoverage['easy_domino_play.js'][455] = 0;
  _$jscoverage['easy_domino_play.js'][457] = 0;
  _$jscoverage['easy_domino_play.js'][458] = 0;
  _$jscoverage['easy_domino_play.js'][459] = 0;
  _$jscoverage['easy_domino_play.js'][461] = 0;
  _$jscoverage['easy_domino_play.js'][463] = 0;
  _$jscoverage['easy_domino_play.js'][464] = 0;
  _$jscoverage['easy_domino_play.js'][465] = 0;
  _$jscoverage['easy_domino_play.js'][467] = 0;
  _$jscoverage['easy_domino_play.js'][469] = 0;
  _$jscoverage['easy_domino_play.js'][470] = 0;
  _$jscoverage['easy_domino_play.js'][471] = 0;
  _$jscoverage['easy_domino_play.js'][473] = 0;
  _$jscoverage['easy_domino_play.js'][476] = 0;
  _$jscoverage['easy_domino_play.js'][477] = 0;
  _$jscoverage['easy_domino_play.js'][479] = 0;
  _$jscoverage['easy_domino_play.js'][481] = 0;
  _$jscoverage['easy_domino_play.js'][482] = 0;
  _$jscoverage['easy_domino_play.js'][483] = 0;
  _$jscoverage['easy_domino_play.js'][484] = 0;
  _$jscoverage['easy_domino_play.js'][485] = 0;
  _$jscoverage['easy_domino_play.js'][486] = 0;
  _$jscoverage['easy_domino_play.js'][487] = 0;
  _$jscoverage['easy_domino_play.js'][489] = 0;
  _$jscoverage['easy_domino_play.js'][493] = 0;
  _$jscoverage['easy_domino_play.js'][494] = 0;
}
_$jscoverage['easy_domino_play.js'].source = ["<span class=\"c\">/*</span>","<span class=\"c\"> * @file easy_domin_play.js</span>","<span class=\"c\"> * @version 0.2.0</span>","<span class=\"c\"> * @author ginger</span>","<span class=\"c\"> * @brief easy domino gameplay javascript part</span>","<span class=\"c\"> */</span>","","<span class=\"c\">// origin x, y, width, height based on a screen 800 * 640</span>","<span class=\"c\">/* about canvas */</span>","<span class=\"k\">var</span> canvas<span class=\"k\">,</span> context<span class=\"k\">;</span>","<span class=\"c\">/* global settings */</span>","<span class=\"k\">var</span> global<span class=\"k\">;</span>","<span class=\"c\">/* about resources */</span>","<span class=\"c\">/* gameplay */</span>","<span class=\"c\">/* FIX HERE */</span>","","<span class=\"c\">/* start game */</span>","<span class=\"k\">function</span> startGame<span class=\"k\">()</span> <span class=\"k\">{</span>","\t<span class=\"c\">// get global settings</span>","\tgetGlobalSettings<span class=\"k\">();</span>","\t<span class=\"c\">// load resources</span>","\tloadResource<span class=\"k\">();</span>","\t<span class=\"c\">// waiting for loading</span>","\t<span class=\"k\">var</span> waitid <span class=\"k\">=</span> setInterval<span class=\"k\">(</span><span class=\"k\">function</span> <span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span>global<span class=\"k\">.</span>loading<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"c\">// initialize gameplay</span>","\t\t\tinitGamePlay<span class=\"k\">();</span>","\t\t\t<span class=\"c\">// start to draw UI</span>","\t\t\tstartDrawUI<span class=\"k\">();</span>","\t\t\t<span class=\"c\">// add event listeners, player can operate</span>","\t\t\tinitListener<span class=\"k\">();</span>","\t\t\t<span class=\"c\">// stop waiting</span>","\t\t\tclearInterval<span class=\"k\">(</span>waitid<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span><span class=\"k\">,</span> <span class=\"s\">500</span><span class=\"k\">);</span>","<span class=\"k\">}</span>","<span class=\"c\">// get global settings</span>","<span class=\"k\">function</span> getGlobalSettings<span class=\"k\">()</span> <span class=\"k\">{</span>","\tglobal <span class=\"k\">=</span> <span class=\"k\">{}</span><span class=\"k\">;</span>","\t<span class=\"c\">// element ids</span>","\tglobal<span class=\"k\">.</span>canvasId <span class=\"k\">=</span> <span class=\"s\">'playground'</span><span class=\"k\">;</span>","\tglobal<span class=\"k\">.</span>bodyId\t<span class=\"k\">=</span> <span class=\"s\">'_body'</span><span class=\"k\">;</span>","\t<span class=\"c\">// resources</span>","\tglobal<span class=\"k\">.</span>resourceList <span class=\"k\">=</span> <span class=\"k\">[</span>","\t\t<span class=\"k\">{</span>name<span class=\"k\">:</span> <span class=\"s\">'boneset'</span><span class=\"k\">,</span> \t\ttype<span class=\"k\">:</span> <span class=\"s\">'img'</span><span class=\"k\">,</span> \tsrc<span class=\"k\">:</span> <span class=\"s\">'./img/domino-set.png'</span><span class=\"k\">}</span><span class=\"k\">,</span>","\t\t<span class=\"k\">{</span>name<span class=\"k\">:</span> <span class=\"s\">'background'</span><span class=\"k\">,</span> \ttype<span class=\"k\">:</span> <span class=\"s\">'img'</span><span class=\"k\">,</span> \tsrc<span class=\"k\">:</span> <span class=\"s\">'./img/background.png'</span><span class=\"k\">}</span><span class=\"k\">,</span>","\t\t<span class=\"k\">{</span>name<span class=\"k\">:</span> <span class=\"s\">'handpanel'</span><span class=\"k\">,</span> \ttype<span class=\"k\">:</span> <span class=\"s\">'img'</span><span class=\"k\">,</span> \tsrc<span class=\"k\">:</span> <span class=\"s\">'./img/handpanel.png'</span><span class=\"k\">}</span>","\t<span class=\"k\">];</span>","\t<span class=\"c\">// loading flag</span>","\tglobal<span class=\"k\">.</span>loading <span class=\"k\">=</span> global<span class=\"k\">.</span>resourceList<span class=\"k\">.</span>length<span class=\"k\">;</span>","\t<span class=\"c\">// UI refresh time</span>","\tglobal<span class=\"k\">.</span>UIRefreshTime <span class=\"k\">=</span> <span class=\"s\">50</span><span class=\"k\">;</span>","\t<span class=\"c\">// how many bonesets are used</span>","\tglobal<span class=\"k\">.</span>bonesetNum <span class=\"k\">=</span> <span class=\"s\">1</span><span class=\"k\">;</span>","\t<span class=\"c\">// player names</span>","\tglobal<span class=\"k\">.</span>playerNameList <span class=\"k\">=</span> <span class=\"k\">[</span><span class=\"s\">'player1'</span><span class=\"k\">,</span> <span class=\"s\">'player2'</span><span class=\"k\">];</span>","\t<span class=\"c\">// how many bones a player hold at the beginning</span>","\tglobal<span class=\"k\">.</span>playerBeginningBoneNum <span class=\"k\">=</span> <span class=\"s\">7</span><span class=\"k\">;</span>","<span class=\"k\">}</span>","<span class=\"c\">// load resources</span>","<span class=\"k\">function</span> loadResource<span class=\"k\">()</span> <span class=\"k\">{</span>","\t<span class=\"c\">// generate resource holder</span>","\tglobal<span class=\"k\">.</span>resourceHolder <span class=\"k\">=</span> <span class=\"k\">[];</span>","\t<span class=\"c\">// load each resource</span>","\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> global<span class=\"k\">.</span>resourceList<span class=\"k\">.</span>length<span class=\"k\">;</span> i <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> res <span class=\"k\">=</span> global<span class=\"k\">.</span>resourceList<span class=\"k\">[</span>i<span class=\"k\">];</span>","\t\t<span class=\"k\">switch</span> <span class=\"k\">(</span>res<span class=\"k\">.</span>type<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"c\">// load image resource</span>","\t\t\t<span class=\"k\">case</span> <span class=\"s\">'img'</span><span class=\"k\">:</span>","\t\t\t\tglobal<span class=\"k\">.</span>resourceHolder<span class=\"k\">[</span>res<span class=\"k\">.</span>name<span class=\"k\">]</span> <span class=\"k\">=</span> <span class=\"k\">new</span> Image<span class=\"k\">();</span>","\t\t\t\tglobal<span class=\"k\">.</span>resourceHolder<span class=\"k\">[</span>res<span class=\"k\">.</span>name<span class=\"k\">].</span>onload <span class=\"k\">=</span> <span class=\"k\">function</span> <span class=\"k\">()</span> <span class=\"k\">{</span> global<span class=\"k\">.</span>loading <span class=\"k\">=</span> parseInt<span class=\"k\">(</span>global<span class=\"k\">.</span>loading<span class=\"k\">)</span> <span class=\"k\">-</span> <span class=\"s\">1</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t\tglobal<span class=\"k\">.</span>resourceHolder<span class=\"k\">[</span>res<span class=\"k\">.</span>name<span class=\"k\">].</span>src <span class=\"k\">=</span> res<span class=\"k\">.</span>src<span class=\"k\">;</span>","\t\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span>","\t<span class=\"c\">// load logical resource</span>","\tglobal<span class=\"k\">.</span>resourceHolder<span class=\"k\">[</span><span class=\"s\">'bonesetparam'</span><span class=\"k\">]</span> <span class=\"k\">=</span> <span class=\"k\">{</span>x<span class=\"k\">:</span> <span class=\"s\">75</span><span class=\"k\">,</span> y<span class=\"k\">:</span> <span class=\"s\">150</span><span class=\"k\">,</span> w<span class=\"k\">:</span> <span class=\"s\">62</span><span class=\"k\">,</span> h<span class=\"k\">:</span> <span class=\"s\">124</span><span class=\"k\">}</span><span class=\"k\">;</span>","\tglobal<span class=\"k\">.</span>resourceHolder<span class=\"k\">[</span><span class=\"s\">'dlist'</span><span class=\"k\">]</span> <span class=\"k\">=</span> <span class=\"k\">[</span><span class=\"s\">'v+'</span><span class=\"k\">,</span> <span class=\"s\">'h+'</span><span class=\"k\">,</span> <span class=\"s\">'v-'</span><span class=\"k\">,</span> <span class=\"s\">'h-'</span><span class=\"k\">];</span>","<span class=\"k\">}</span>","<span class=\"c\">// initialize gameplay</span>","<span class=\"k\">function</span> initGamePlay<span class=\"k\">()</span> <span class=\"k\">{</span>","\t<span class=\"c\">// generate boneset</span>","\t<span class=\"k\">var</span> bones <span class=\"k\">=</span> <span class=\"k\">[];</span>","\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> global<span class=\"k\">.</span>bonesetNum<span class=\"k\">;</span> i <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> j <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> j <span class=\"k\">&lt;=</span> <span class=\"s\">6</span><span class=\"k\">;</span> j <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> k <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> k <span class=\"k\">&lt;=</span> j<span class=\"k\">;</span> k <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\t\t\tbones<span class=\"k\">.</span>push<span class=\"k\">(</span>Bone<span class=\"k\">.</span>createNew<span class=\"k\">(</span>j<span class=\"k\">,</span> k<span class=\"k\">));</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span>","\tglobal<span class=\"k\">.</span>boneHolder <span class=\"k\">=</span> Player<span class=\"k\">.</span>createNew<span class=\"k\">(</span><span class=\"s\">'boneHolder'</span><span class=\"k\">,</span> bones<span class=\"k\">);</span>","\t<span class=\"c\">// select the beginning bone</span>","\t<span class=\"k\">var</span> startBone <span class=\"k\">=</span> global<span class=\"k\">.</span>boneHolder<span class=\"k\">.</span>removeBone<span class=\"k\">(</span>getRandom<span class=\"k\">(</span><span class=\"s\">0</span><span class=\"k\">,</span> global<span class=\"k\">.</span>boneHolder<span class=\"k\">.</span>getPlayerBones<span class=\"k\">().</span>length <span class=\"k\">-</span> <span class=\"s\">1</span><span class=\"k\">));</span>","\t<span class=\"c\">// put the beginning bone on table</span>","\t<span class=\"c\">// xPos, yPos is 'how many half bones'</span>","\tglobal<span class=\"k\">.</span>bonexesOnTable <span class=\"k\">=</span> <span class=\"k\">[</span><span class=\"k\">{</span>bone<span class=\"k\">:</span> startBone<span class=\"k\">,</span> xPos<span class=\"k\">:</span> <span class=\"s\">0</span><span class=\"k\">,</span> yPos<span class=\"k\">:</span> <span class=\"s\">0</span><span class=\"k\">,</span> d<span class=\"k\">:</span> <span class=\"s\">1</span><span class=\"k\">}</span><span class=\"k\">];</span>","\t<span class=\"c\">// generate players</span>","\t<span class=\"k\">var</span> playerList <span class=\"k\">=</span> <span class=\"k\">[];</span>","\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> global<span class=\"k\">.</span>playerNameList<span class=\"k\">.</span>length<span class=\"k\">;</span> i <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// generate a player</span>","\t\t<span class=\"k\">var</span> aPlayer <span class=\"k\">=</span> Player<span class=\"k\">.</span>createNew<span class=\"k\">(</span>global<span class=\"k\">.</span>playerNameList<span class=\"k\">[</span>i<span class=\"k\">]);</span>","\t\t<span class=\"c\">// give players bones</span>","\t\t<span class=\"k\">var</span> playerBones <span class=\"k\">=</span> <span class=\"k\">[];</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> j <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> j <span class=\"k\">&lt;</span> global<span class=\"k\">.</span>playerBeginningBoneNum<span class=\"k\">;</span> j <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\t\tplayerBones<span class=\"k\">.</span>push<span class=\"k\">(</span>global<span class=\"k\">.</span>boneHolder<span class=\"k\">.</span>removeBone<span class=\"k\">(</span>getRandom<span class=\"k\">(</span><span class=\"s\">0</span><span class=\"k\">,</span> global<span class=\"k\">.</span>boneHolder<span class=\"k\">.</span>getPlayerBones<span class=\"k\">().</span>length <span class=\"k\">-</span> <span class=\"s\">1</span><span class=\"k\">)));</span>","\t\t<span class=\"k\">}</span>","\t\taPlayer<span class=\"k\">.</span>setBones<span class=\"k\">(</span>playerBones<span class=\"k\">);</span>","\t\tplayerList<span class=\"k\">.</span>push<span class=\"k\">(</span>aPlayer<span class=\"k\">);</span>","\t<span class=\"k\">}</span>","\t<span class=\"c\">// put player1's bones to hand panel</span>","\tglobal<span class=\"k\">.</span>bonesOfPlayer <span class=\"k\">=</span> <span class=\"k\">[];</span>","\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> global<span class=\"k\">.</span>playerNameList<span class=\"k\">.</span>length<span class=\"k\">;</span> i <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\tglobal<span class=\"k\">.</span>bonesOfPlayer<span class=\"k\">[</span>i<span class=\"k\">]</span> <span class=\"k\">=</span> playerList<span class=\"k\">[</span>i<span class=\"k\">].</span>getPlayerBones<span class=\"k\">().</span>slice<span class=\"k\">();</span>","\t<span class=\"k\">}</span>","\tglobal<span class=\"k\">.</span>bonesInHand <span class=\"k\">=</span> global<span class=\"k\">.</span>bonesOfPlayer<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>slice<span class=\"k\">();</span>","\t<span class=\"c\">// generate null strategy</span>","\t<span class=\"k\">var</span> strategy <span class=\"k\">=</span> <span class=\"k\">{}</span><span class=\"k\">;</span>","\tstrategy<span class=\"k\">.</span>getScoreForSend <span class=\"k\">=</span> <span class=\"k\">function</span> <span class=\"k\">(</span>branchendIndex<span class=\"k\">,</span> bone<span class=\"k\">,</span> direct<span class=\"k\">)</span> <span class=\"k\">{</span> <span class=\"k\">return</span> <span class=\"s\">1</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t<span class=\"c\">// generate boneyard</span>","\tglobal<span class=\"k\">.</span>boneyard <span class=\"k\">=</span> Boneyard<span class=\"k\">.</span>createNew<span class=\"k\">([</span>startBone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> startBone<span class=\"k\">.</span>getNum2<span class=\"k\">()],</span> playerList<span class=\"k\">,</span> <span class=\"k\">null</span><span class=\"k\">,</span> strategy<span class=\"k\">);</span>","\t<span class=\"c\">// initialize bone direction</span>","\tglobal<span class=\"k\">.</span>bonesInHandDirect <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span>","\t<span class=\"c\">// initialize branchends</span>","\tglobal<span class=\"k\">.</span>branchends <span class=\"k\">=</span> <span class=\"k\">[];</span>","\tglobal<span class=\"k\">.</span>branchends<span class=\"k\">[</span>posToString<span class=\"k\">(</span><span class=\"k\">{</span>x<span class=\"k\">:</span> <span class=\"s\">1.5</span><span class=\"k\">,</span> y<span class=\"k\">:</span> <span class=\"s\">0</span><span class=\"k\">}</span><span class=\"k\">)]</span> <span class=\"k\">=</span> startBone<span class=\"k\">.</span>getNum1<span class=\"k\">();</span>","\tglobal<span class=\"k\">.</span>branchends<span class=\"k\">[</span>posToString<span class=\"k\">(</span><span class=\"k\">{</span>x<span class=\"k\">:</span> <span class=\"k\">-</span><span class=\"s\">1.5</span><span class=\"k\">,</span> y<span class=\"k\">:</span> <span class=\"s\">0</span><span class=\"k\">}</span><span class=\"k\">)]</span> <span class=\"k\">=</span> startBone<span class=\"k\">.</span>getNum2<span class=\"k\">();</span>","\t<span class=\"c\">// initialize scores</span>","\tglobal<span class=\"k\">.</span>scores <span class=\"k\">=</span> <span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">,</span> <span class=\"s\">0</span><span class=\"k\">];</span>","\t<span class=\"c\">// set current player to player1</span>","\tglobal<span class=\"k\">.</span>curPlayer <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span>","<span class=\"k\">}</span>","<span class=\"c\">// start draw UI</span>","<span class=\"k\">function</span> startDrawUI<span class=\"k\">()</span> <span class=\"k\">{</span>","\tcanvas <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span>global<span class=\"k\">.</span>canvasId<span class=\"k\">);</span>","\tcontext <span class=\"k\">=</span> canvas<span class=\"k\">.</span>getContext<span class=\"k\">(</span><span class=\"s\">'2d'</span><span class=\"k\">);</span>","\tglobal<span class=\"k\">.</span>uid <span class=\"k\">=</span> setInterval<span class=\"k\">(</span><span class=\"s\">'drawUI()'</span><span class=\"k\">,</span> global<span class=\"k\">.</span>UIRefreshTime<span class=\"k\">);</span>","<span class=\"k\">}</span>","<span class=\"c\">// add event listeners, player can operate</span>","<span class=\"k\">function</span> initListener<span class=\"k\">()</span> <span class=\"k\">{</span>","\t<span class=\"c\">//window.onresize = doResize;</span>","\tcanvas<span class=\"k\">.</span>onmousedown <span class=\"k\">=</span> doMouseDown<span class=\"k\">;</span>","\tcanvas<span class=\"k\">.</span>onmousemove <span class=\"k\">=</span> doMouseMove<span class=\"k\">;</span>","\tcanvas<span class=\"k\">.</span>onmouseup <span class=\"k\">=</span> doMouseUp<span class=\"k\">;</span>","\tcanvas<span class=\"k\">.</span>onmousewheel <span class=\"k\">=</span> doMouseWheel<span class=\"k\">;</span>","\tdocument<span class=\"k\">.</span>onkeyup <span class=\"k\">=</span> <span class=\"k\">function</span> <span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>event<span class=\"k\">.</span>keyCode <span class=\"k\">===</span> <span class=\"s\">32</span><span class=\"k\">)</span> <span class=\"k\">{</span>\t<span class=\"c\">// space</span>","\t\t\t<span class=\"c\">// next player</span>","\t\t\tglobal<span class=\"k\">.</span>curPlayer <span class=\"k\">=</span> <span class=\"k\">(</span>global<span class=\"k\">.</span>curPlayer <span class=\"k\">+</span> <span class=\"s\">1</span><span class=\"k\">)</span> <span class=\"k\">%</span> global<span class=\"k\">.</span>playerNameList<span class=\"k\">.</span>length<span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span>","\talert<span class=\"k\">(</span><span class=\"s\">'&#230;&#184;&#184;&#230;&#136;&#143;&#229;&#188;&#128;&#229;&#167;&#139;&#239;&#188;&#140;&#230;&#139;&#150;&#229;&#138;&#168;&#229;&#135;&#186;&#231;&#137;&#140;&#239;&#188;&#140;&#230;&#187;&#154;&#232;&#189;&#174;&#230;&#148;&#185;&#229;&#143;&#152;&#230;&#150;&#185;&#229;&#144;&#145;&#239;&#188;&#140;&#231;&#169;&#186;&#230;&#160;&#188;&#232;&#183;&#179;&#232;&#191;&#135;'</span><span class=\"k\">)</span>","<span class=\"k\">}</span>","<span class=\"k\">function</span> doMouseDown<span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"k\">var</span> resize <span class=\"k\">=</span> getResize<span class=\"k\">();</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span>event<span class=\"k\">.</span>offsetY <span class=\"k\">&gt;</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">*</span><span class=\"s\">2</span><span class=\"k\">/</span><span class=\"s\">3</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> index <span class=\"k\">=</span> touchBoneInHand<span class=\"k\">(</span>event<span class=\"k\">.</span>offsetX<span class=\"k\">,</span> event<span class=\"k\">.</span>offsetY<span class=\"k\">,</span> resize<span class=\"k\">);</span>","\t\t<span class=\"c\">// if select a bone in hand</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>index <span class=\"k\">!==</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"c\">// splice it from bones in hand</span>","\t\t\t<span class=\"k\">var</span> mBone <span class=\"k\">=</span> global<span class=\"k\">.</span>bonesInHand<span class=\"k\">[</span>index<span class=\"k\">];</span>","\t\t\t<span class=\"c\">//global.bonesInHand.splice(index, 1);</span>","\t\t\tglobal<span class=\"k\">.</span>bonesOfPlayer<span class=\"k\">[</span>global<span class=\"k\">.</span>curPlayer<span class=\"k\">].</span>splice<span class=\"k\">(</span>index<span class=\"k\">,</span> <span class=\"s\">1</span><span class=\"k\">);</span>","\t\t\t<span class=\"c\">// set it as moving bone</span>","\t\t\tglobal<span class=\"k\">.</span>movingBonex <span class=\"k\">=</span> <span class=\"k\">{</span>type<span class=\"k\">:</span> <span class=\"s\">'bone'</span><span class=\"k\">,</span> value<span class=\"k\">:</span> getResource<span class=\"k\">(</span><span class=\"s\">'boneset'</span><span class=\"k\">),</span> bone<span class=\"k\">:</span> mBone<span class=\"k\">,</span> d<span class=\"k\">:</span> global<span class=\"k\">.</span>bonesInHandDirect","\t\t\t\t\t\t\t\t\t<span class=\"k\">,</span> x<span class=\"k\">:</span> event<span class=\"k\">.</span>offsetX<span class=\"k\">,</span> y<span class=\"k\">:</span> event<span class=\"k\">.</span>offsetY<span class=\"k\">,</span> w<span class=\"k\">:</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">,</span> h<span class=\"k\">:</span> resize<span class=\"k\">.</span>boneScreenHeightOnTable<span class=\"k\">}</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span>","<span class=\"k\">}</span>","<span class=\"k\">function</span> doMouseMove<span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"c\">// update moving bone position</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">typeof</span><span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">)</span> <span class=\"k\">!==</span> <span class=\"s\">'undefined'</span> <span class=\"k\">&amp;&amp;</span> global<span class=\"k\">.</span>movingBonex <span class=\"k\">!==</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tglobal<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>x <span class=\"k\">=</span> event<span class=\"k\">.</span>offsetX<span class=\"k\">;</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>y <span class=\"k\">=</span> event<span class=\"k\">.</span>offsetY<span class=\"k\">;</span>","\t<span class=\"k\">}</span>","<span class=\"k\">}</span>","<span class=\"k\">function</span> doMouseUp<span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">typeof</span><span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">)</span> <span class=\"k\">!==</span> <span class=\"s\">'undefined'</span> <span class=\"k\">&amp;&amp;</span> global<span class=\"k\">.</span>movingBonex <span class=\"k\">!==</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> resize <span class=\"k\">=</span> getResize<span class=\"k\">();</span>","\t\t<span class=\"c\">// if put moving bone in hand</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>event<span class=\"k\">.</span>offsetY <span class=\"k\">&gt;</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">*</span><span class=\"s\">2</span><span class=\"k\">/</span><span class=\"s\">3</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\tglobal<span class=\"k\">.</span>bonesOfPlayer<span class=\"k\">[</span>global<span class=\"k\">.</span>curPlayer<span class=\"k\">].</span>push<span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">);</span>","\t\t\tglobal<span class=\"k\">.</span>movingBonex <span class=\"k\">=</span> <span class=\"k\">null</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"c\">// if put moving bone on table</span>","\t\t<span class=\"k\">else</span> <span class=\"k\">{</span>","\t\t\t<span class=\"c\">// detect branchend</span>","\t\t\t<span class=\"k\">var</span> detectResult <span class=\"k\">=</span> detectBranchend<span class=\"k\">(</span>event<span class=\"k\">.</span>offsetX<span class=\"k\">,</span> event<span class=\"k\">.</span>offsetY<span class=\"k\">);</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>detectResult<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\ttouchBoneOnTable<span class=\"k\">(</span>event<span class=\"k\">.</span>offsetX<span class=\"k\">,</span> event<span class=\"k\">.</span>offsetY<span class=\"k\">);</span>","\t\t\t\t<span class=\"c\">// put moving bone to table</span>","\t\t\t\t<span class=\"k\">var</span> pos <span class=\"k\">=</span> getXYPos<span class=\"k\">(</span>event<span class=\"k\">.</span>offsetX<span class=\"k\">,</span> event<span class=\"k\">.</span>offsetY<span class=\"k\">,</span> resize<span class=\"k\">);</span>","\t\t\t\tglobal<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>xPos <span class=\"k\">=</span> pos<span class=\"k\">.</span>x<span class=\"k\">;</span>","\t\t\t\tglobal<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>yPos <span class=\"k\">=</span> pos<span class=\"k\">.</span>y<span class=\"k\">;</span>","\t\t\t\tglobal<span class=\"k\">.</span>resourceHolder<span class=\"k\">[</span><span class=\"s\">'debug'</span><span class=\"k\">]</span> <span class=\"k\">=</span> <span class=\"s\">'put bone on '</span> <span class=\"k\">+</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>xPos <span class=\"k\">+</span> <span class=\"s\">', '</span> <span class=\"k\">+</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>yPos<span class=\"k\">;</span>","\t\t\t\tglobal<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">.</span>push<span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">);</span>","\t\t\t\t<span class=\"c\">// update branchends</span>","\t\t\t\tglobal<span class=\"k\">.</span>branchends<span class=\"k\">[</span>detectResult<span class=\"k\">]</span> <span class=\"k\">=</span> <span class=\"k\">null</span><span class=\"k\">;</span>","\t\t\t\t<span class=\"c\">// if horizontal, add 2 branchends thisX +/- 1.5</span>","\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'h+'</span><span class=\"k\">)</span> <span class=\"k\">{</span>\t\t\t<span class=\"c\">// smaller right</span>","\t\t\t\t\taddBranchend<span class=\"k\">(</span>pos<span class=\"k\">.</span>x <span class=\"k\">+</span> <span class=\"s\">1.5</span><span class=\"k\">,</span> pos<span class=\"k\">.</span>y<span class=\"k\">,</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">());</span>","\t\t\t\t\taddBranchend<span class=\"k\">(</span>pos<span class=\"k\">.</span>x <span class=\"k\">-</span> <span class=\"s\">1.5</span><span class=\"k\">,</span> pos<span class=\"k\">.</span>y<span class=\"k\">,</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">());</span>","\t\t\t\t<span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'h-'</span><span class=\"k\">)</span> <span class=\"k\">{</span>\t<span class=\"c\">// smaller left</span>","\t\t\t\t\taddBranchend<span class=\"k\">(</span>pos<span class=\"k\">.</span>x <span class=\"k\">-</span> <span class=\"s\">1.5</span><span class=\"k\">,</span> pos<span class=\"k\">.</span>y<span class=\"k\">,</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">());</span>","\t\t\t\t\taddBranchend<span class=\"k\">(</span>pos<span class=\"k\">.</span>x <span class=\"k\">+</span> <span class=\"s\">1.5</span><span class=\"k\">,</span> pos<span class=\"k\">.</span>y<span class=\"k\">,</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">());</span>","\t\t\t\t<span class=\"k\">}</span>","\t\t\t\t<span class=\"c\">// if vertical, add 2 branchends thisY +/- 1.5</span>","\t\t\t\t<span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'v+'</span><span class=\"k\">)</span> <span class=\"k\">{</span>\t\t<span class=\"c\">// smaller up</span>","\t\t\t\t\taddBranchend<span class=\"k\">(</span>pos<span class=\"k\">.</span>x<span class=\"k\">,</span> pos<span class=\"k\">.</span>y <span class=\"k\">-</span> <span class=\"s\">1.5</span><span class=\"k\">,</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">());</span>","\t\t\t\t\taddBranchend<span class=\"k\">(</span>pos<span class=\"k\">.</span>x<span class=\"k\">,</span> pos<span class=\"k\">.</span>y <span class=\"k\">+</span> <span class=\"s\">1.5</span><span class=\"k\">,</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">());</span>","\t\t\t\t<span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'v-'</span><span class=\"k\">)</span> <span class=\"k\">{</span>\t<span class=\"c\">// smaller down</span>","\t\t\t\t\taddBranchend<span class=\"k\">(</span>pos<span class=\"k\">.</span>x<span class=\"k\">,</span> pos<span class=\"k\">.</span>y <span class=\"k\">+</span> <span class=\"s\">1.5</span><span class=\"k\">,</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">());</span>","\t\t\t\t\taddBranchend<span class=\"k\">(</span>pos<span class=\"k\">.</span>x<span class=\"k\">,</span> pos<span class=\"k\">.</span>y <span class=\"k\">-</span> <span class=\"s\">1.5</span><span class=\"k\">,</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">());</span>","\t\t\t\t<span class=\"k\">}</span>","\t\t\t\t<span class=\"c\">// score</span>","\t\t\t\tglobal<span class=\"k\">.</span>scores<span class=\"k\">[</span>global<span class=\"k\">.</span>curPlayer<span class=\"k\">]</span> <span class=\"k\">+=</span> <span class=\"s\">1</span><span class=\"k\">;</span>","\t\t\t\tglobal<span class=\"k\">.</span>movingBonex <span class=\"k\">=</span> <span class=\"k\">null</span><span class=\"k\">;</span>","\t\t\t\t<span class=\"c\">// next player</span>","\t\t\t\tglobal<span class=\"k\">.</span>curPlayer <span class=\"k\">=</span> <span class=\"k\">(</span>global<span class=\"k\">.</span>curPlayer <span class=\"k\">+</span> <span class=\"s\">1</span><span class=\"k\">)</span> <span class=\"k\">%</span> global<span class=\"k\">.</span>playerNameList<span class=\"k\">.</span>length<span class=\"k\">;</span>","\t\t\t<span class=\"k\">}</span>","\t\t\t<span class=\"c\">// put bone back to hand</span>","\t\t\t<span class=\"k\">else</span> <span class=\"k\">{</span>","\t\t\t\tglobal<span class=\"k\">.</span>bonesOfPlayer<span class=\"k\">[</span>global<span class=\"k\">.</span>curPlayer<span class=\"k\">].</span>push<span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">);</span>","\t\t\t\tglobal<span class=\"k\">.</span>movingBonex <span class=\"k\">=</span> <span class=\"k\">null</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span>","<span class=\"k\">}</span>","<span class=\"k\">function</span> doMouseWheel<span class=\"k\">(</span>event<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"c\">// if there is moving bone</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span>event<span class=\"k\">.</span>wheelDelta <span class=\"k\">&gt;</span> <span class=\"s\">10</span><span class=\"k\">)</span> <span class=\"k\">{</span>\t<span class=\"c\">// up</span>","\t\t<span class=\"c\">//global.bonesInHandDirect = (global.bonesInHandDirect + getResource('dlist').length + 1) % getResource('dlist').length;</span>","\t\tglobal<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d <span class=\"k\">=</span> <span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d <span class=\"k\">+</span> getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">).</span>length <span class=\"k\">-</span> <span class=\"s\">1</span><span class=\"k\">)</span> <span class=\"k\">%</span> getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">).</span>length<span class=\"k\">;</span>","\t<span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>event<span class=\"k\">.</span>wheelDelta <span class=\"k\">&lt;</span> <span class=\"s\">10</span><span class=\"k\">)</span> <span class=\"k\">{</span>\t<span class=\"c\">// down</span>","\t\t<span class=\"c\">//global.bonesInHandDirect = (global.bonesInHandDirect + getResource('dlist').length - 1) % getResource('dlist').length;</span>","\t\tglobal<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d <span class=\"k\">=</span> <span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d <span class=\"k\">+</span> getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">).</span>length <span class=\"k\">+</span> <span class=\"s\">1</span><span class=\"k\">)</span> <span class=\"k\">%</span> getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">).</span>length<span class=\"k\">;</span>","\t<span class=\"k\">}</span>","<span class=\"k\">}</span>","<span class=\"k\">function</span> detectBranchend<span class=\"k\">(</span>x<span class=\"k\">,</span> y<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"k\">var</span> pos <span class=\"k\">=</span> getXYPos<span class=\"k\">(</span>x<span class=\"k\">,</span> y<span class=\"k\">,</span> getResize<span class=\"k\">());</span>","\t<span class=\"k\">var</span> dPosList <span class=\"k\">=</span> <span class=\"k\">[];</span>","\t<span class=\"c\">// if horizontal, detect position: this, thisX-0.5, thisX+0.5</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'h+'</span><span class=\"k\">)</span> <span class=\"k\">{</span>\t\t\t<span class=\"c\">// smaller right</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">()</span> <span class=\"k\">===</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">())</span> <span class=\"k\">{</span>","\t\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x<span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y<span class=\"k\">}</span><span class=\"k\">);</span>","\t\t<span class=\"k\">}</span>","\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x <span class=\"k\">+</span> <span class=\"s\">0.5</span><span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y<span class=\"k\">}</span><span class=\"k\">);</span>","\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x <span class=\"k\">-</span> <span class=\"s\">0.5</span><span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y<span class=\"k\">}</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'h-'</span><span class=\"k\">)</span> <span class=\"k\">{</span>\t<span class=\"c\">// smaller left</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">()</span> <span class=\"k\">===</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">())</span> <span class=\"k\">{</span>","\t\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x<span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y<span class=\"k\">}</span><span class=\"k\">);</span>","\t\t<span class=\"k\">}</span>","\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x <span class=\"k\">-</span> <span class=\"s\">0.5</span><span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y<span class=\"k\">}</span><span class=\"k\">);</span>","\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x <span class=\"k\">+</span> <span class=\"s\">0.5</span><span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y<span class=\"k\">}</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span>","\t<span class=\"c\">// if vertical, detect position: this, thisY-0.5, thisY+0.5</span>","\t<span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'v+'</span><span class=\"k\">)</span> <span class=\"k\">{</span>\t\t<span class=\"c\">// smaller up</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">()</span> <span class=\"k\">===</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">())</span> <span class=\"k\">{</span>","\t\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x<span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y<span class=\"k\">}</span><span class=\"k\">);</span>","\t\t<span class=\"k\">}</span>","\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x<span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y <span class=\"k\">-</span> <span class=\"s\">0.5</span><span class=\"k\">}</span><span class=\"k\">);</span>","\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x<span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y <span class=\"k\">+</span> <span class=\"s\">0.5</span><span class=\"k\">}</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'v-'</span><span class=\"k\">)</span> <span class=\"k\">{</span>\t<span class=\"c\">// smaller down</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">()</span> <span class=\"k\">===</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">())</span> <span class=\"k\">{</span>","\t\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x<span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y<span class=\"k\">}</span><span class=\"k\">);</span>","\t\t<span class=\"k\">}</span>","\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x<span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y <span class=\"k\">+</span> <span class=\"s\">0.5</span><span class=\"k\">}</span><span class=\"k\">);</span>","\t\tdPosList<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>value<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">(),</span> x<span class=\"k\">:</span> pos<span class=\"k\">.</span>x<span class=\"k\">,</span> y<span class=\"k\">:</span> pos<span class=\"k\">.</span>y <span class=\"k\">-</span> <span class=\"s\">0.5</span><span class=\"k\">}</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span>","\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> dPosList<span class=\"k\">.</span>length<span class=\"k\">;</span> i <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> str <span class=\"k\">=</span> posToString<span class=\"k\">(</span><span class=\"k\">{</span>x<span class=\"k\">:</span> dPosList<span class=\"k\">[</span>i<span class=\"k\">].</span>x<span class=\"k\">,</span> y<span class=\"k\">:</span> dPosList<span class=\"k\">[</span>i<span class=\"k\">].</span>y<span class=\"k\">}</span><span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>global<span class=\"k\">.</span>branchends<span class=\"k\">[</span>str<span class=\"k\">]</span> <span class=\"k\">===</span> dPosList<span class=\"k\">[</span>i<span class=\"k\">].</span>value<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">return</span> str<span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span>","\t<span class=\"k\">return</span> <span class=\"k\">false</span><span class=\"k\">;</span>","<span class=\"k\">}</span>","<span class=\"k\">function</span> getXYPos<span class=\"k\">(</span>x<span class=\"k\">,</span> y<span class=\"k\">,</span> resize<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"k\">var</span> ret <span class=\"k\">=</span> <span class=\"k\">{}</span><span class=\"k\">;</span>","\t<span class=\"k\">var</span> xDiff <span class=\"k\">=</span> x<span class=\"k\">-</span>resize<span class=\"k\">.</span>screenWidth<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">,</span> yDiff <span class=\"k\">=</span> y<span class=\"k\">-</span>resize<span class=\"k\">.</span>screenHeight<span class=\"k\">/</span><span class=\"s\">3</span><span class=\"k\">;</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span>xDiff <span class=\"k\">&gt;</span> <span class=\"s\">0</span><span class=\"k\">)</span> <span class=\"k\">{</span> ret<span class=\"k\">.</span>x <span class=\"k\">=</span> parseInt<span class=\"k\">((</span>xDiff<span class=\"k\">+</span>resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">/</span><span class=\"s\">4</span><span class=\"k\">)/(</span>resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">))/</span><span class=\"s\">2</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t<span class=\"k\">else</span> <span class=\"k\">{</span> ret<span class=\"k\">.</span>x <span class=\"k\">=</span> parseInt<span class=\"k\">((</span>xDiff<span class=\"k\">-</span>resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">/</span><span class=\"s\">4</span><span class=\"k\">)/(</span>resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">))/</span><span class=\"s\">2</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span>yDiff <span class=\"k\">&gt;</span> <span class=\"s\">0</span><span class=\"k\">)</span> <span class=\"k\">{</span> ret<span class=\"k\">.</span>y <span class=\"k\">=</span> parseInt<span class=\"k\">((</span>yDiff<span class=\"k\">+</span>resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">/</span><span class=\"s\">4</span><span class=\"k\">)/(</span>resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">))/</span><span class=\"s\">2</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t<span class=\"k\">else</span> <span class=\"k\">{</span> ret<span class=\"k\">.</span>y <span class=\"k\">=</span> parseInt<span class=\"k\">((</span>yDiff<span class=\"k\">-</span>resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">/</span><span class=\"s\">4</span><span class=\"k\">)/(</span>resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">))/</span><span class=\"s\">2</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t<span class=\"k\">return</span> ret<span class=\"k\">;</span>","<span class=\"k\">}</span>","<span class=\"k\">function</span> posToString<span class=\"k\">(</span>pos<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"k\">return</span> pos<span class=\"k\">.</span>x <span class=\"k\">+</span> <span class=\"s\">'|'</span> <span class=\"k\">+</span> pos<span class=\"k\">.</span>y<span class=\"k\">;</span>","<span class=\"k\">}</span>","<span class=\"k\">function</span> addBranchend<span class=\"k\">(</span>xPos<span class=\"k\">,</span> yPos<span class=\"k\">,</span> value<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"k\">var</span> resize <span class=\"k\">=</span> getResize<span class=\"k\">();</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span>touchBoneOnTable<span class=\"k\">(</span>resize<span class=\"k\">.</span>screenWidth <span class=\"k\">/</span> <span class=\"s\">2</span> <span class=\"k\">+</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable <span class=\"k\">*</span> xPos","\t\t\t\t\t\t<span class=\"k\">,</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">/</span> <span class=\"s\">3</span> <span class=\"k\">+</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable <span class=\"k\">*</span> yPos<span class=\"k\">,</span> resize<span class=\"k\">)</span> <span class=\"k\">===</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tglobal<span class=\"k\">.</span>branchends<span class=\"k\">[</span>posToString<span class=\"k\">(</span><span class=\"k\">{</span>x<span class=\"k\">:</span> xPos<span class=\"k\">,</span> y<span class=\"k\">:</span> yPos<span class=\"k\">}</span><span class=\"k\">)]</span> <span class=\"k\">=</span> value<span class=\"k\">;</span>","\t<span class=\"k\">}</span>","<span class=\"k\">}</span>","","","","","<span class=\"c\">/* about resource */</span>","<span class=\"k\">function</span> getResource<span class=\"k\">(</span>name<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"k\">return</span> global<span class=\"k\">.</span>resourceHolder<span class=\"k\">[</span>name<span class=\"k\">];</span>","<span class=\"k\">}</span>","","<span class=\"c\">/* about resize */</span>","<span class=\"k\">function</span> getResize<span class=\"k\">()</span> <span class=\"k\">{</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">typeof</span><span class=\"k\">(</span>global<span class=\"k\">.</span>body<span class=\"k\">)</span> <span class=\"k\">===</span> <span class=\"s\">'undefined'</span><span class=\"k\">)</span> <span class=\"k\">{</span> global<span class=\"k\">.</span>body <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span>global<span class=\"k\">.</span>bodyId<span class=\"k\">);</span> <span class=\"k\">}</span>","\t<span class=\"k\">var</span> resize <span class=\"k\">=</span> <span class=\"k\">{}</span><span class=\"k\">;</span>","\tresize<span class=\"k\">.</span>screenWidth <span class=\"k\">=</span> global<span class=\"k\">.</span>body<span class=\"k\">.</span>offsetWidth<span class=\"k\">;</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">=</span> global<span class=\"k\">.</span>body<span class=\"k\">.</span>offsetHeight<span class=\"k\">;</span>","\t<span class=\"k\">var</span> boneScreenWidth <span class=\"k\">=</span> getResource<span class=\"k\">(</span><span class=\"s\">'bonesetparam'</span><span class=\"k\">).</span>w <span class=\"k\">*</span> resize<span class=\"k\">.</span>screenWidth <span class=\"k\">/</span> <span class=\"s\">670</span> <span class=\"k\">/</span> <span class=\"s\">3</span><span class=\"k\">;</span>","\t<span class=\"k\">var</span> boneScreenHeight <span class=\"k\">=</span> boneScreenWidth <span class=\"k\">*</span> <span class=\"s\">2</span><span class=\"k\">;</span>","\tresize<span class=\"k\">.</span>boneScreenWidthOnTable <span class=\"k\">=</span> boneScreenWidth<span class=\"k\">;</span>","\tresize<span class=\"k\">.</span>boneScreenHeightOnTable <span class=\"k\">=</span> boneScreenHeight<span class=\"k\">;</span>","\tresize<span class=\"k\">.</span>boneScreenWidthInHand <span class=\"k\">=</span> boneScreenWidth <span class=\"k\">*</span> <span class=\"s\">1.5</span><span class=\"k\">;</span>","\tresize<span class=\"k\">.</span>boneScreenHeightInHand <span class=\"k\">=</span> boneScreenHeight <span class=\"k\">*</span> <span class=\"s\">1.5</span><span class=\"k\">;</span>","\t<span class=\"k\">return</span> resize<span class=\"k\">;</span>","<span class=\"k\">}</span>","","<span class=\"c\">/* about draw UI */</span>","<span class=\"k\">function</span> drawUI<span class=\"k\">()</span> <span class=\"k\">{</span>","\t<span class=\"c\">// get resize factor</span>","\t<span class=\"k\">var</span> resize <span class=\"k\">=</span> getResize<span class=\"k\">();</span>","\t<span class=\"c\">// resize canvas</span>","\tcanvas<span class=\"k\">.</span>setAttribute<span class=\"k\">(</span><span class=\"s\">'width'</span><span class=\"k\">,</span> resize<span class=\"k\">.</span>screenWidth<span class=\"k\">);</span> canvas<span class=\"k\">.</span>setAttribute<span class=\"k\">(</span><span class=\"s\">'height'</span><span class=\"k\">,</span> resize<span class=\"k\">.</span>screenHeight<span class=\"k\">);</span>","\t<span class=\"c\">// generate draw list</span>","\t<span class=\"k\">var</span> drawlist <span class=\"k\">=</span> <span class=\"k\">[];</span>","\t<span class=\"c\">// background</span>","\tdrawlist<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>type<span class=\"k\">:</span> <span class=\"s\">'imgtile'</span><span class=\"k\">,</span> value<span class=\"k\">:</span> getResource<span class=\"k\">(</span><span class=\"s\">'background'</span><span class=\"k\">),</span> x<span class=\"k\">:</span> <span class=\"s\">0</span><span class=\"k\">,</span> y<span class=\"k\">:</span> <span class=\"s\">0</span><span class=\"k\">,</span> w<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenWidth<span class=\"k\">,</span> h<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenHeight<span class=\"k\">}</span><span class=\"k\">);</span>","\t<span class=\"c\">// hand panel</span>","\tglobal<span class=\"k\">.</span>bonesInHand <span class=\"k\">=</span> global<span class=\"k\">.</span>bonesOfPlayer<span class=\"k\">[</span>global<span class=\"k\">.</span>curPlayer<span class=\"k\">].</span>slice<span class=\"k\">();</span>","\tdrawlist<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>type<span class=\"k\">:</span> <span class=\"s\">'imgtile'</span><span class=\"k\">,</span> value<span class=\"k\">:</span> getResource<span class=\"k\">(</span><span class=\"s\">'handpanel'</span><span class=\"k\">),</span> x<span class=\"k\">:</span> <span class=\"s\">0</span><span class=\"k\">,</span> y<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">*</span> <span class=\"s\">2</span><span class=\"k\">/</span><span class=\"s\">3</span>","\t\t\t\t\t<span class=\"k\">,</span> w<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenWidth<span class=\"k\">,</span> h<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">/</span> <span class=\"s\">3</span><span class=\"k\">}</span><span class=\"k\">);</span>","\t<span class=\"c\">// bones on table</span>","\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">.</span>length<span class=\"k\">;</span> i <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> tBone <span class=\"k\">=</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">[</span>i<span class=\"k\">];</span>","\t\tdrawlist<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>type<span class=\"k\">:</span> <span class=\"s\">'bone'</span><span class=\"k\">,</span> value<span class=\"k\">:</span> getResource<span class=\"k\">(</span><span class=\"s\">'boneset'</span><span class=\"k\">),</span> bone<span class=\"k\">:</span> tBone<span class=\"k\">.</span>bone<span class=\"k\">,</span> d<span class=\"k\">:</span> tBone<span class=\"k\">.</span>d","\t\t\t\t\t\t<span class=\"k\">,</span> x<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenWidth <span class=\"k\">/</span> <span class=\"s\">2</span> <span class=\"k\">+</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable <span class=\"k\">*</span> tBone<span class=\"k\">.</span>xPos","\t\t\t\t\t\t<span class=\"k\">,</span> y<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">/</span> <span class=\"s\">3</span> <span class=\"k\">+</span> resize<span class=\"k\">.</span>boneScreenHeightOnTable <span class=\"k\">/</span> <span class=\"s\">2</span> <span class=\"k\">*</span> tBone<span class=\"k\">.</span>yPos","\t\t\t\t\t\t<span class=\"k\">,</span> w<span class=\"k\">:</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">,</span> h<span class=\"k\">:</span> resize<span class=\"k\">.</span>boneScreenHeightOnTable<span class=\"k\">}</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span>","\t<span class=\"c\">// bones in hand</span>","\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> global<span class=\"k\">.</span>bonesInHand<span class=\"k\">.</span>length<span class=\"k\">;</span> i <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> hBone <span class=\"k\">=</span> global<span class=\"k\">.</span>bonesInHand<span class=\"k\">[</span>i<span class=\"k\">];</span>","\t\tdrawlist<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>type<span class=\"k\">:</span> <span class=\"s\">'bone'</span><span class=\"k\">,</span> value<span class=\"k\">:</span> getResource<span class=\"k\">(</span><span class=\"s\">'boneset'</span><span class=\"k\">),</span> bone<span class=\"k\">:</span> hBone<span class=\"k\">,</span> d<span class=\"k\">:</span> global<span class=\"k\">.</span>bonesInHandDirect","\t\t\t\t\t\t<span class=\"k\">,</span> x<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenWidth <span class=\"k\">/</span> <span class=\"k\">(</span>global<span class=\"k\">.</span>bonesInHand<span class=\"k\">.</span>length <span class=\"k\">+</span> <span class=\"s\">1</span><span class=\"k\">)</span> <span class=\"k\">*</span> <span class=\"k\">(</span>i <span class=\"k\">+</span> <span class=\"s\">1</span><span class=\"k\">)</span>","\t\t\t\t\t\t<span class=\"k\">,</span> y<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">*</span> <span class=\"s\">5</span> <span class=\"k\">/</span> <span class=\"s\">6</span>","\t\t\t\t\t\t<span class=\"k\">,</span> w<span class=\"k\">:</span> resize<span class=\"k\">.</span>boneScreenWidthInHand<span class=\"k\">,</span> h<span class=\"k\">:</span> resize<span class=\"k\">.</span>boneScreenHeightInHand<span class=\"k\">}</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span>","\t<span class=\"c\">// effect</span>","\t<span class=\"c\">// moving effect</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">typeof</span><span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">)</span> <span class=\"k\">!==</span> <span class=\"s\">'undefined'</span> <span class=\"k\">&amp;&amp;</span> global<span class=\"k\">.</span>movingBonex <span class=\"k\">!==</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> pos <span class=\"k\">=</span> getXYPos<span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>x<span class=\"k\">,</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>y<span class=\"k\">,</span> resize<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">==</span> <span class=\"s\">'v+'</span> <span class=\"k\">||</span> getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">==</span> <span class=\"s\">'v-'</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\tdrawlist<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>type<span class=\"k\">:</span> <span class=\"s\">'strokerect'</span><span class=\"k\">,</span> value<span class=\"k\">:</span> <span class=\"s\">'#0000FF'</span>","\t\t\t\t\t\t<span class=\"k\">,</span> x<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenWidth <span class=\"k\">/</span> <span class=\"s\">2</span> <span class=\"k\">+</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable <span class=\"k\">*</span> <span class=\"k\">(</span>pos<span class=\"k\">.</span>x<span class=\"k\">-</span><span class=\"s\">0.5</span><span class=\"k\">)</span>","\t\t\t\t\t\t<span class=\"k\">,</span> y<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">/</span> <span class=\"s\">3</span> <span class=\"k\">+</span> resize<span class=\"k\">.</span>boneScreenHeightOnTable <span class=\"k\">/</span> <span class=\"s\">2</span> <span class=\"k\">*</span> <span class=\"k\">(</span>pos<span class=\"k\">.</span>y<span class=\"k\">-</span><span class=\"s\">1</span><span class=\"k\">)</span>","\t\t\t\t\t\t<span class=\"k\">,</span> w<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>w","\t\t\t\t\t\t<span class=\"k\">,</span> h<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>h<span class=\"k\">}</span><span class=\"k\">);</span>","\t\t<span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","\t\t\tdrawlist<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>type<span class=\"k\">:</span> <span class=\"s\">'strokerect'</span><span class=\"k\">,</span> value<span class=\"k\">:</span> <span class=\"s\">'#0000FF'</span>","\t\t\t\t\t\t<span class=\"k\">,</span> x<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenWidth <span class=\"k\">/</span> <span class=\"s\">2</span> <span class=\"k\">+</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable <span class=\"k\">*</span> <span class=\"k\">(</span>pos<span class=\"k\">.</span>x<span class=\"k\">-</span><span class=\"s\">1</span><span class=\"k\">)</span>","\t\t\t\t\t\t<span class=\"k\">,</span> y<span class=\"k\">:</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">/</span> <span class=\"s\">3</span> <span class=\"k\">+</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable <span class=\"k\">*</span> <span class=\"k\">(</span>pos<span class=\"k\">.</span>y<span class=\"k\">-</span><span class=\"s\">0.5</span><span class=\"k\">)</span>","\t\t\t\t\t\t<span class=\"k\">,</span> w<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>h","\t\t\t\t\t\t<span class=\"k\">,</span> h<span class=\"k\">:</span> global<span class=\"k\">.</span>movingBonex<span class=\"k\">.</span>w<span class=\"k\">}</span><span class=\"k\">);</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span>","\t<span class=\"c\">// bone moving</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">typeof</span><span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">)</span> <span class=\"k\">!==</span> <span class=\"s\">'undefined'</span> <span class=\"k\">&amp;&amp;</span> global<span class=\"k\">.</span>movingBonex <span class=\"k\">!==</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tdrawlist<span class=\"k\">.</span>push<span class=\"k\">(</span>global<span class=\"k\">.</span>movingBonex<span class=\"k\">);</span>","\t<span class=\"k\">}</span>","\t<span class=\"c\">// text</span>","\t<span class=\"k\">var</span> score <span class=\"k\">=</span> <span class=\"s\">''</span><span class=\"k\">;</span>","\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> global<span class=\"k\">.</span>boneyard<span class=\"k\">.</span>getPlayers<span class=\"k\">().</span>length<span class=\"k\">;</span> i <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\tscore <span class=\"k\">=</span> score <span class=\"k\">+</span> <span class=\"s\">' '</span> <span class=\"k\">+</span> global<span class=\"k\">.</span>boneyard<span class=\"k\">.</span>getPlayers<span class=\"k\">()[</span>i<span class=\"k\">].</span>getPlayerName<span class=\"k\">()</span> ","\t\t\t\t<span class=\"k\">+</span> <span class=\"s\">' '</span> <span class=\"k\">+</span> global<span class=\"k\">.</span>scores<span class=\"k\">[</span>i<span class=\"k\">]</span> <span class=\"k\">+</span> <span class=\"s\">'&#229;&#136;&#134; '</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span>","\tdrawlist<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>type<span class=\"k\">:</span> <span class=\"s\">'text'</span><span class=\"k\">,</span> value<span class=\"k\">:</span> score<span class=\"k\">,</span> x<span class=\"k\">:</span> <span class=\"s\">0</span><span class=\"k\">,</span> y<span class=\"k\">:</span> <span class=\"s\">40</span><span class=\"k\">,</span> font<span class=\"k\">:</span> <span class=\"s\">\"20px Courier New\"</span><span class=\"k\">,</span> color<span class=\"k\">:</span> <span class=\"s\">'red'</span><span class=\"k\">}</span><span class=\"k\">);</span>","\tdrawlist<span class=\"k\">.</span>push<span class=\"k\">(</span><span class=\"k\">{</span>type<span class=\"k\">:</span> <span class=\"s\">'text'</span><span class=\"k\">,</span> value<span class=\"k\">:</span> <span class=\"s\">' current '</span> <span class=\"k\">+</span> global<span class=\"k\">.</span>playerNameList<span class=\"k\">[</span>global<span class=\"k\">.</span>curPlayer<span class=\"k\">],</span> x<span class=\"k\">:</span> <span class=\"s\">0</span><span class=\"k\">,</span> y<span class=\"k\">:</span> <span class=\"s\">20</span><span class=\"k\">,</span> font<span class=\"k\">:</span> <span class=\"s\">\"20px Courier New\"</span><span class=\"k\">,</span> color<span class=\"k\">:</span> <span class=\"s\">'blue'</span><span class=\"k\">}</span><span class=\"k\">);</span>","\t<span class=\"c\">// clear canvas</span>","\tcontext<span class=\"k\">.</span>fillStyle <span class=\"k\">=</span> <span class=\"s\">'#FFFFFF'</span><span class=\"k\">;</span> context<span class=\"k\">.</span>fillRect<span class=\"k\">(</span><span class=\"s\">0</span><span class=\"k\">,</span> <span class=\"s\">0</span><span class=\"k\">,</span> resize<span class=\"k\">.</span>screenWidth<span class=\"k\">,</span> resize<span class=\"k\">.</span>screenHeight<span class=\"k\">);</span>","\t<span class=\"c\">// draw</span>","\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> drawlist<span class=\"k\">.</span>length<span class=\"k\">;</span> i <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\tdrawItem<span class=\"k\">(</span>drawlist<span class=\"k\">[</span>i<span class=\"k\">]);</span>","\t<span class=\"k\">}</span>","<span class=\"k\">}</span>","<span class=\"k\">function</span> drawItem<span class=\"k\">(</span>item<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"k\">switch</span> <span class=\"k\">(</span>item<span class=\"k\">.</span>type<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">case</span> <span class=\"s\">'imgtile'</span><span class=\"k\">:</span>","\t\t\tcontext<span class=\"k\">.</span>beginPath<span class=\"k\">();</span>","\t\t\tcontext<span class=\"k\">.</span>rect<span class=\"k\">(</span>item<span class=\"k\">.</span>x<span class=\"k\">,</span> item<span class=\"k\">.</span>y<span class=\"k\">,</span> item<span class=\"k\">.</span>w<span class=\"k\">,</span> item<span class=\"k\">.</span>h<span class=\"k\">);</span>","\t\t\tcontext<span class=\"k\">.</span>fillStyle <span class=\"k\">=</span> context<span class=\"k\">.</span>createPattern<span class=\"k\">(</span>item<span class=\"k\">.</span>value<span class=\"k\">,</span> <span class=\"s\">'repeat'</span><span class=\"k\">);</span>","\t\t\tcontext<span class=\"k\">.</span>fill<span class=\"k\">();</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">case</span> <span class=\"s\">'bone'</span><span class=\"k\">:</span>","\t\t\t<span class=\"k\">var</span> param <span class=\"k\">=</span> getResource<span class=\"k\">(</span><span class=\"s\">'bonesetparam'</span><span class=\"k\">);</span>","\t\t\t<span class=\"k\">var</span> r<span class=\"k\">;</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>item<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'h+'</span><span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"s\">90</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t<span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>item<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'h-'</span><span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"k\">-</span><span class=\"s\">90</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t<span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>item<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'v+'</span><span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t<span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>item<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'v-'</span><span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"s\">180</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\tdrawBone<span class=\"k\">(</span>item<span class=\"k\">.</span>value<span class=\"k\">,</span> item<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">()</span> <span class=\"k\">*</span> param<span class=\"k\">.</span>x<span class=\"k\">,</span> item<span class=\"k\">.</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">()</span> <span class=\"k\">*</span> param<span class=\"k\">.</span>y<span class=\"k\">,</span> param<span class=\"k\">.</span>w<span class=\"k\">,</span> param<span class=\"k\">.</span>h","\t\t\t\t\t<span class=\"k\">,</span> item<span class=\"k\">.</span>x<span class=\"k\">,</span> item<span class=\"k\">.</span>y<span class=\"k\">,</span> item<span class=\"k\">.</span>w<span class=\"k\">,</span> item<span class=\"k\">.</span>h<span class=\"k\">,</span> r<span class=\"k\">);</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">case</span> <span class=\"s\">'text'</span><span class=\"k\">:</span>","\t\t\tcontext<span class=\"k\">.</span>font <span class=\"k\">=</span> item<span class=\"k\">.</span>font<span class=\"k\">;</span>","\t\t\tcontext<span class=\"k\">.</span>fillStyle <span class=\"k\">=</span> item<span class=\"k\">.</span>color<span class=\"k\">;</span>","\t\t\tcontext<span class=\"k\">.</span>fillText<span class=\"k\">(</span>item<span class=\"k\">.</span>value<span class=\"k\">,</span> item<span class=\"k\">.</span>x<span class=\"k\">,</span> item<span class=\"k\">.</span>y<span class=\"k\">);</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">case</span> <span class=\"s\">'strokerect'</span><span class=\"k\">:</span>","\t\t\tcontext<span class=\"k\">.</span>save<span class=\"k\">();</span>","\t\t\tcontext<span class=\"k\">.</span>strokeStyle <span class=\"k\">=</span> item<span class=\"k\">.</span>value<span class=\"k\">;</span>","\t\t\tcontext<span class=\"k\">.</span>strokeRect<span class=\"k\">(</span>item<span class=\"k\">.</span>x<span class=\"k\">,</span> item<span class=\"k\">.</span>y<span class=\"k\">,</span> item<span class=\"k\">.</span>w<span class=\"k\">,</span> item<span class=\"k\">.</span>h<span class=\"k\">);</span>","\t\t\tcontext<span class=\"k\">.</span>restore<span class=\"k\">();</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span>","<span class=\"k\">}</span>","<span class=\"c\">/* HERE &#233;&#135;&#141;&#232;&#166;&#129;&#231;&#154;&#132;&#231;&#187;&#143;&#233;&#170;&#140;</span>","<span class=\"c\">translate&#231;&#154;&#132;&#228;&#189;&#156;&#231;&#148;&#168;&#230;&#152;&#175;&#231;&#167;&#187;&#229;&#138;&#168;&#231;&#187;&#152;&#229;&#136;&#182;&#229;&#142;&#159;&#231;&#130;&#185;</span>","<span class=\"c\">rotate&#231;&#154;&#132;&#228;&#189;&#156;&#231;&#148;&#168;&#230;&#152;&#175;&#230;&#151;&#139;&#232;&#189;&#172;&#231;&#187;&#152;&#229;&#136;&#182;&#229;&#142;&#159;&#231;&#130;&#185;</span>","<span class=\"c\">&#230;&#137;&#128;&#228;&#187;&#165;&#229;&#143;&#170;&#232;&#166;&#129;&#231;&#167;&#187;&#229;&#138;&#168;&#229;&#136;&#176;&#232;&#166;&#129;&#231;&#187;&#152;&#229;&#136;&#182;&#231;&#154;&#132;&#229;&#155;&#190;&#229;&#189;&#162;&#231;&#154;&#132;&#228;&#184;&#173;&#229;&#191;&#131;&#231;&#130;&#185;-&#227;&#128;&#139;&#230;&#151;&#139;&#232;&#189;&#172;-&#227;&#128;&#139;&#231;&#155;&#184;&#229;&#175;&#185;&#228;&#186;&#142;&#230;&#151;&#139;&#232;&#189;&#172;&#229;&#144;&#142;&#231;&#154;&#132;&#229;&#157;&#144;&#230;&#160;&#135;&#231;&#167;&#187;&#229;&#138;&#168;&#229;&#136;&#176;&#229;&#155;&#190;&#229;&#189;&#162;&#229;&#183;&#166;&#228;&#184;&#138;&#232;&#167;&#146;-&#227;&#128;&#139;&#231;&#187;&#152;&#229;&#136;&#182;&#229;&#141;&#179;&#229;&#143;&#175;&#239;&#188;&#129;</span>","<span class=\"c\">&#230;&#137;&#128;&#228;&#187;&#165;&#232;&#191;&#153;&#233;&#135;&#140;&#228;&#188;&#160;&#229;&#133;&#165;&#231;&#154;&#132;x,y&#229;&#133;&#182;&#229;&#174;&#158;&#230;&#152;&#175;&#239;&#188;&#140;&#232;&#166;&#129;&#228;&#187;&#165;&#229;&#147;&#170;&#228;&#184;&#128;&#231;&#130;&#185;&#228;&#184;&#186;&#228;&#184;&#173;&#229;&#191;&#131;&#231;&#187;&#152;&#229;&#155;&#190;&#239;&#188;&#129;*/</span>","<span class=\"k\">function</span> drawBone<span class=\"k\">(</span>img<span class=\"k\">,</span> sx<span class=\"k\">,</span> sy<span class=\"k\">,</span> sw<span class=\"k\">,</span> sh<span class=\"k\">,</span> x<span class=\"k\">,</span> y<span class=\"k\">,</span> w<span class=\"k\">,</span> h<span class=\"k\">,</span> r<span class=\"k\">)</span> <span class=\"k\">{</span>","\tcontext<span class=\"k\">.</span>save<span class=\"k\">();</span>","\t<span class=\"k\">var</span> r0 <span class=\"k\">=</span> r <span class=\"k\">*</span> Math<span class=\"k\">.</span>PI <span class=\"k\">/</span> <span class=\"s\">180</span><span class=\"k\">;</span>","\tcontext<span class=\"k\">.</span>translate<span class=\"k\">(</span>x<span class=\"k\">,</span> y<span class=\"k\">);</span>","\tcontext<span class=\"k\">.</span>rotate<span class=\"k\">(</span>r0<span class=\"k\">);</span>","\tcontext<span class=\"k\">.</span>translate<span class=\"k\">(-</span>w<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">,</span> <span class=\"k\">-</span>h<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">);</span>","\tcontext<span class=\"k\">.</span>drawImage<span class=\"k\">(</span>img<span class=\"k\">,</span> sx<span class=\"k\">,</span> sy<span class=\"k\">,</span> sw<span class=\"k\">,</span> sh<span class=\"k\">,</span> <span class=\"s\">0</span><span class=\"k\">,</span> <span class=\"s\">0</span><span class=\"k\">,</span> w<span class=\"k\">,</span> h<span class=\"k\">);</span>","\tcontext<span class=\"k\">.</span>restore<span class=\"k\">();</span>","<span class=\"k\">}</span>","","<span class=\"c\">/* get bone from position */</span>","<span class=\"k\">function</span> touchBoneOnTable<span class=\"k\">(</span>x<span class=\"k\">,</span> y<span class=\"k\">,</span> resize<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"k\">var</span> r <span class=\"k\">=</span> <span class=\"k\">null</span><span class=\"k\">;</span>","\t<span class=\"c\">//global.resourceHolder['debug'] = '(' + x + ',' + y + ')';</span>","\t<span class=\"k\">var</span> resize <span class=\"k\">=</span> getResize<span class=\"k\">();</span>","\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">.</span>length<span class=\"k\">;</span> i <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> tBone <span class=\"k\">=</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">[</span>i<span class=\"k\">];</span>","\t\t<span class=\"k\">var</span> tW<span class=\"k\">,</span> tH<span class=\"k\">;</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>tBone<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'v+'</span> <span class=\"k\">||</span> getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>tBone<span class=\"k\">.</span>d<span class=\"k\">]</span> <span class=\"k\">===</span> <span class=\"s\">'v-'</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\ttW <span class=\"k\">=</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">;</span>","\t\t\ttH <span class=\"k\">=</span> resize<span class=\"k\">.</span>boneScreenHeightOnTable<span class=\"k\">;</span>","\t\t<span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","\t\t\ttW <span class=\"k\">=</span> resize<span class=\"k\">.</span>boneScreenHeightOnTable<span class=\"k\">;</span>","\t\t\ttH <span class=\"k\">=</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable<span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">var</span> tX <span class=\"k\">=</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable <span class=\"k\">*</span> tBone<span class=\"k\">.</span>xPos <span class=\"k\">+</span> resize<span class=\"k\">.</span>screenWidth <span class=\"k\">/</span> <span class=\"s\">2</span> <span class=\"k\">-</span> tW<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> tY <span class=\"k\">=</span> resize<span class=\"k\">.</span>boneScreenWidthOnTable <span class=\"k\">*</span> tBone<span class=\"k\">.</span>yPos <span class=\"k\">+</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">/</span> <span class=\"s\">3</span> <span class=\"k\">-</span>tH<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">;</span>","\t\t<span class=\"c\">//global.resourceHolder['debug'] = global.resourceHolder['debug'] + '(' + tX + ',' + tY + ',' + tW + ',' + tH + ')\\n';</span>","\t\t<span class=\"k\">switch</span> <span class=\"k\">(</span>getResource<span class=\"k\">(</span><span class=\"s\">'dlist'</span><span class=\"k\">)[</span>tBone<span class=\"k\">.</span>d<span class=\"k\">])</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">case</span> <span class=\"s\">'v+'</span><span class=\"k\">:</span>","\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>x <span class=\"k\">&gt;</span> tX <span class=\"k\">&amp;&amp;</span> x <span class=\"k\">&lt;</span> tX <span class=\"k\">+</span> tW<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>y <span class=\"k\">&gt;</span> tY <span class=\"k\">&amp;&amp;</span> y <span class=\"k\">&lt;</span> tY <span class=\"k\">+</span> tH<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"k\">{</span>num<span class=\"k\">:</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">[</span>i<span class=\"k\">].</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> index<span class=\"k\">:</span> i<span class=\"k\">,</span> t<span class=\"k\">:</span> <span class=\"s\">'up'</span><span class=\"k\">}</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t\t\t<span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>y <span class=\"k\">&gt;</span> tY <span class=\"k\">+</span> tH<span class=\"k\">/</span><span class=\"s\">2</span> <span class=\"k\">&amp;&amp;</span> y <span class=\"k\">&lt;</span> tY <span class=\"k\">+</span> tH<span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"k\">{</span>num<span class=\"k\">:</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">[</span>i<span class=\"k\">].</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">(),</span> index<span class=\"k\">:</span> i<span class=\"k\">,</span> t<span class=\"k\">:</span> <span class=\"s\">'down'</span><span class=\"k\">}</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t\t<span class=\"k\">}</span>","\t\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">case</span> <span class=\"s\">'v-'</span><span class=\"k\">:</span>","\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>x <span class=\"k\">&gt;</span> tX <span class=\"k\">&amp;&amp;</span> x <span class=\"k\">&lt;</span> tX <span class=\"k\">+</span> tW<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>y <span class=\"k\">&gt;</span> tY <span class=\"k\">&amp;&amp;</span> y <span class=\"k\">&lt;</span> tY <span class=\"k\">+</span> tH<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"k\">{</span>num<span class=\"k\">:</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">[</span>i<span class=\"k\">].</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">(),</span> index<span class=\"k\">:</span> i<span class=\"k\">,</span> t<span class=\"k\">:</span> <span class=\"s\">'up'</span><span class=\"k\">}</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t\t\t<span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>y <span class=\"k\">&gt;</span> tY <span class=\"k\">+</span> tH<span class=\"k\">/</span><span class=\"s\">2</span> <span class=\"k\">&amp;&amp;</span> y <span class=\"k\">&lt;</span> tY <span class=\"k\">+</span> tH<span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"k\">{</span>num<span class=\"k\">:</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">[</span>i<span class=\"k\">].</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> index<span class=\"k\">:</span> i<span class=\"k\">,</span> t<span class=\"k\">:</span> <span class=\"s\">'down'</span><span class=\"k\">}</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t\t<span class=\"k\">}</span>","\t\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">case</span> <span class=\"s\">'h+'</span><span class=\"k\">:</span>","\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>y <span class=\"k\">&gt;</span> tY <span class=\"k\">&amp;&amp;</span> y <span class=\"k\">&lt;</span> tY <span class=\"k\">+</span> tH<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>x <span class=\"k\">&gt;</span> tX <span class=\"k\">&amp;&amp;</span> x <span class=\"k\">&lt;</span> tX <span class=\"k\">+</span> tW<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"k\">{</span>num<span class=\"k\">:</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">[</span>i<span class=\"k\">].</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">(),</span> index<span class=\"k\">:</span> i<span class=\"k\">,</span> t<span class=\"k\">:</span> <span class=\"s\">'left'</span><span class=\"k\">}</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t\t\t<span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>x <span class=\"k\">&gt;</span> tX <span class=\"k\">+</span> tW<span class=\"k\">/</span><span class=\"s\">2</span> <span class=\"k\">&amp;&amp;</span> x <span class=\"k\">&lt;</span> tX <span class=\"k\">+</span> tW<span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"k\">{</span>num<span class=\"k\">:</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">[</span>i<span class=\"k\">].</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> index<span class=\"k\">:</span> i<span class=\"k\">,</span> t<span class=\"k\">:</span> <span class=\"s\">'right'</span><span class=\"k\">}</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t\t<span class=\"k\">}</span>","\t\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">case</span> <span class=\"s\">'h-'</span><span class=\"k\">:</span>","\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>y <span class=\"k\">&gt;</span> tY <span class=\"k\">&amp;&amp;</span> y <span class=\"k\">&lt;</span> tY <span class=\"k\">+</span> tH<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>x <span class=\"k\">&gt;</span> tX <span class=\"k\">&amp;&amp;</span> x <span class=\"k\">&lt;</span> tX <span class=\"k\">+</span> tW<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"k\">{</span>num<span class=\"k\">:</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">[</span>i<span class=\"k\">].</span>bone<span class=\"k\">.</span>getNum1<span class=\"k\">(),</span> index<span class=\"k\">:</span> i<span class=\"k\">,</span> t<span class=\"k\">:</span> <span class=\"s\">'left'</span><span class=\"k\">}</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t\t\t<span class=\"k\">else</span> <span class=\"k\">if</span> <span class=\"k\">(</span>x <span class=\"k\">&gt;</span> tX <span class=\"k\">+</span> tW<span class=\"k\">/</span><span class=\"s\">2</span> <span class=\"k\">&amp;&amp;</span> x <span class=\"k\">&lt;</span> tX <span class=\"k\">+</span> tW<span class=\"k\">)</span> <span class=\"k\">{</span> r <span class=\"k\">=</span> <span class=\"k\">{</span>num<span class=\"k\">:</span> global<span class=\"k\">.</span>bonexesOnTable<span class=\"k\">[</span>i<span class=\"k\">].</span>bone<span class=\"k\">.</span>getNum2<span class=\"k\">(),</span> index<span class=\"k\">:</span> i<span class=\"k\">,</span> t<span class=\"k\">:</span> <span class=\"s\">'right'</span><span class=\"k\">}</span><span class=\"k\">;</span> <span class=\"k\">}</span>","\t\t\t\t<span class=\"k\">}</span>","\t\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span>","\t<span class=\"k\">if</span> <span class=\"k\">(</span>r <span class=\"k\">!==</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tglobal<span class=\"k\">.</span>resourceHolder<span class=\"k\">[</span><span class=\"s\">'debug'</span><span class=\"k\">]</span> <span class=\"k\">=</span> r<span class=\"k\">.</span>num <span class=\"k\">+</span> <span class=\"s\">' at bonexesOnTable '</span> <span class=\"k\">+</span> r<span class=\"k\">.</span>index <span class=\"k\">+</span> <span class=\"s\">' to direction '</span> <span class=\"k\">+</span> r<span class=\"k\">.</span>t<span class=\"k\">;</span>","\t<span class=\"k\">}</span>","\t<span class=\"k\">return</span> r<span class=\"k\">;</span>","<span class=\"k\">}</span>","<span class=\"k\">function</span> touchBoneInHand<span class=\"k\">(</span>x<span class=\"k\">,</span> y<span class=\"k\">,</span> resize<span class=\"k\">)</span> <span class=\"k\">{</span>","\t<span class=\"k\">for</span> <span class=\"k\">(</span><span class=\"k\">var</span> i <span class=\"k\">=</span> <span class=\"s\">0</span><span class=\"k\">;</span> i <span class=\"k\">&lt;</span> global<span class=\"k\">.</span>bonesInHand<span class=\"k\">.</span>length<span class=\"k\">;</span> i <span class=\"k\">++)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> hW <span class=\"k\">=</span> resize<span class=\"k\">.</span>boneScreenWidthInHand<span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> hH <span class=\"k\">=</span> resize<span class=\"k\">.</span>boneScreenHeightInHand<span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> hX <span class=\"k\">=</span> resize<span class=\"k\">.</span>screenWidth <span class=\"k\">/</span> <span class=\"k\">(</span>global<span class=\"k\">.</span>bonesInHand<span class=\"k\">.</span>length <span class=\"k\">+</span> <span class=\"s\">1</span><span class=\"k\">)</span> <span class=\"k\">*</span> <span class=\"k\">(</span>i <span class=\"k\">+</span> <span class=\"s\">1</span><span class=\"k\">)</span> <span class=\"k\">-</span> hW<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> hY <span class=\"k\">=</span> resize<span class=\"k\">.</span>screenHeight <span class=\"k\">*</span> <span class=\"s\">5</span> <span class=\"k\">/</span> <span class=\"s\">6</span> <span class=\"k\">-</span> hH<span class=\"k\">/</span><span class=\"s\">2</span><span class=\"k\">;</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>x <span class=\"k\">&gt;</span> hX <span class=\"k\">&amp;&amp;</span> x <span class=\"k\">&lt;</span> hX <span class=\"k\">+</span> hW <span class=\"k\">&amp;&amp;</span> y <span class=\"k\">&gt;</span> hY <span class=\"k\">&amp;&amp;</span> y <span class=\"k\">&lt;</span> hY <span class=\"k\">+</span> hH<span class=\"k\">)</span> <span class=\"k\">{</span> <span class=\"k\">return</span> i<span class=\"k\">;</span> <span class=\"k\">}</span>","\t<span class=\"k\">}</span>","\t<span class=\"k\">return</span> <span class=\"k\">null</span><span class=\"k\">;</span>","<span class=\"k\">}</span>","","<span class=\"c\">/* get integer random number */</span>","<span class=\"k\">function</span> getRandom<span class=\"k\">(</span>min<span class=\"k\">,</span> max<span class=\"k\">)</span> <span class=\"k\">{</span>\t<span class=\"c\">// between min and max, including both</span>","\t<span class=\"k\">return</span> parseInt<span class=\"k\">(</span>Math<span class=\"k\">.</span>random<span class=\"k\">()</span> <span class=\"k\">*</span> <span class=\"k\">(</span>max <span class=\"k\">-</span> min <span class=\"k\">+</span> <span class=\"s\">1</span><span class=\"k\">))</span> <span class=\"k\">+</span> min<span class=\"k\">;</span>","<span class=\"k\">}</span>"];
_$jscoverage['easy_domino_play.js'][10]++;
var canvas, context;
_$jscoverage['easy_domino_play.js'][12]++;
var global;
_$jscoverage['easy_domino_play.js'][18]++;
function startGame() {
  _$jscoverage['easy_domino_play.js'][20]++;
  getGlobalSettings();
  _$jscoverage['easy_domino_play.js'][22]++;
  loadResource();
  _$jscoverage['easy_domino_play.js'][24]++;
  var waitid = setInterval((function () {
  _$jscoverage['easy_domino_play.js'][25]++;
  if ((! global.loading)) {
    _$jscoverage['easy_domino_play.js'][27]++;
    initGamePlay();
    _$jscoverage['easy_domino_play.js'][29]++;
    startDrawUI();
    _$jscoverage['easy_domino_play.js'][31]++;
    initListener();
    _$jscoverage['easy_domino_play.js'][33]++;
    clearInterval(waitid);
  }
}), 500);
}
_$jscoverage['easy_domino_play.js'][38]++;
function getGlobalSettings() {
  _$jscoverage['easy_domino_play.js'][39]++;
  global = {};
  _$jscoverage['easy_domino_play.js'][41]++;
  global.canvasId = "playground";
  _$jscoverage['easy_domino_play.js'][42]++;
  global.bodyId = "_body";
  _$jscoverage['easy_domino_play.js'][44]++;
  global.resourceList = [{name: "boneset", type: "img", src: "./img/domino-set.png"}, {name: "background", type: "img", src: "./img/background.png"}, {name: "handpanel", type: "img", src: "./img/handpanel.png"}];
  _$jscoverage['easy_domino_play.js'][50]++;
  global.loading = global.resourceList.length;
  _$jscoverage['easy_domino_play.js'][52]++;
  global.UIRefreshTime = 50;
  _$jscoverage['easy_domino_play.js'][54]++;
  global.bonesetNum = 1;
  _$jscoverage['easy_domino_play.js'][56]++;
  global.playerNameList = ["player1", "player2"];
  _$jscoverage['easy_domino_play.js'][58]++;
  global.playerBeginningBoneNum = 7;
}
_$jscoverage['easy_domino_play.js'][61]++;
function loadResource() {
  _$jscoverage['easy_domino_play.js'][63]++;
  global.resourceHolder = [];
  _$jscoverage['easy_domino_play.js'][65]++;
  for (var i = 0; (i < global.resourceList.length); (i++)) {
    _$jscoverage['easy_domino_play.js'][66]++;
    var res = global.resourceList[i];
    _$jscoverage['easy_domino_play.js'][67]++;
    switch (res.type) {
    case "img":
      _$jscoverage['easy_domino_play.js'][70]++;
      global.resourceHolder[res.name] = new Image();
      _$jscoverage['easy_domino_play.js'][71]++;
      global.resourceHolder[res.name].onload = (function () {
  _$jscoverage['easy_domino_play.js'][71]++;
  global.loading = (parseInt(global.loading) - 1);
});
      _$jscoverage['easy_domino_play.js'][72]++;
      global.resourceHolder[res.name].src = res.src;
      _$jscoverage['easy_domino_play.js'][73]++;
      break;
    }
}
  _$jscoverage['easy_domino_play.js'][77]++;
  global.resourceHolder.bonesetparam = {x: 75, y: 150, w: 62, h: 124};
  _$jscoverage['easy_domino_play.js'][78]++;
  global.resourceHolder.dlist = ["v+", "h+", "v-", "h-"];
}
_$jscoverage['easy_domino_play.js'][81]++;
function initGamePlay() {
  _$jscoverage['easy_domino_play.js'][83]++;
  var bones = [];
  _$jscoverage['easy_domino_play.js'][84]++;
  for (var i = 0; (i < global.bonesetNum); (i++)) {
    _$jscoverage['easy_domino_play.js'][85]++;
    for (var j = 0; (j <= 6); (j++)) {
      _$jscoverage['easy_domino_play.js'][86]++;
      for (var k = 0; (k <= j); (k++)) {
        _$jscoverage['easy_domino_play.js'][87]++;
        bones.push(Bone.createNew(j, k));
}
}
}
  _$jscoverage['easy_domino_play.js'][91]++;
  global.boneHolder = Player.createNew("boneHolder", bones);
  _$jscoverage['easy_domino_play.js'][93]++;
  var startBone = global.boneHolder.removeBone(getRandom(0, (global.boneHolder.getPlayerBones().length - 1)));
  _$jscoverage['easy_domino_play.js'][96]++;
  global.bonexesOnTable = [{bone: startBone, xPos: 0, yPos: 0, d: 1}];
  _$jscoverage['easy_domino_play.js'][98]++;
  var playerList = [];
  _$jscoverage['easy_domino_play.js'][99]++;
  for (var i = 0; (i < global.playerNameList.length); (i++)) {
    _$jscoverage['easy_domino_play.js'][101]++;
    var aPlayer = Player.createNew(global.playerNameList[i]);
    _$jscoverage['easy_domino_play.js'][103]++;
    var playerBones = [];
    _$jscoverage['easy_domino_play.js'][104]++;
    for (var j = 0; (j < global.playerBeginningBoneNum); (j++)) {
      _$jscoverage['easy_domino_play.js'][105]++;
      playerBones.push(global.boneHolder.removeBone(getRandom(0, (global.boneHolder.getPlayerBones().length - 1))));
}
    _$jscoverage['easy_domino_play.js'][107]++;
    aPlayer.setBones(playerBones);
    _$jscoverage['easy_domino_play.js'][108]++;
    playerList.push(aPlayer);
}
  _$jscoverage['easy_domino_play.js'][111]++;
  global.bonesOfPlayer = [];
  _$jscoverage['easy_domino_play.js'][112]++;
  for (var i = 0; (i < global.playerNameList.length); (i++)) {
    _$jscoverage['easy_domino_play.js'][113]++;
    global.bonesOfPlayer[i] = playerList[i].getPlayerBones().slice();
}
  _$jscoverage['easy_domino_play.js'][115]++;
  global.bonesInHand = global.bonesOfPlayer[0].slice();
  _$jscoverage['easy_domino_play.js'][117]++;
  var strategy = {};
  _$jscoverage['easy_domino_play.js'][118]++;
  strategy.getScoreForSend = (function (branchendIndex, bone, direct) {
  _$jscoverage['easy_domino_play.js'][118]++;
  return 1;
});
  _$jscoverage['easy_domino_play.js'][120]++;
  global.boneyard = Boneyard.createNew([startBone.getNum1(), startBone.getNum2()], playerList, null, strategy);
  _$jscoverage['easy_domino_play.js'][122]++;
  global.bonesInHandDirect = 0;
  _$jscoverage['easy_domino_play.js'][124]++;
  global.branchends = [];
  _$jscoverage['easy_domino_play.js'][125]++;
  global.branchends[posToString({x: 1.5, y: 0})] = startBone.getNum1();
  _$jscoverage['easy_domino_play.js'][126]++;
  global.branchends[posToString({x: -1.5, y: 0})] = startBone.getNum2();
  _$jscoverage['easy_domino_play.js'][128]++;
  global.scores = [0, 0];
  _$jscoverage['easy_domino_play.js'][130]++;
  global.curPlayer = 0;
}
_$jscoverage['easy_domino_play.js'][133]++;
function startDrawUI() {
  _$jscoverage['easy_domino_play.js'][134]++;
  canvas = document.getElementById(global.canvasId);
  _$jscoverage['easy_domino_play.js'][135]++;
  context = canvas.getContext("2d");
  _$jscoverage['easy_domino_play.js'][136]++;
  global.uid = setInterval("drawUI()", global.UIRefreshTime);
}
_$jscoverage['easy_domino_play.js'][139]++;
function initListener() {
  _$jscoverage['easy_domino_play.js'][141]++;
  canvas.onmousedown = doMouseDown;
  _$jscoverage['easy_domino_play.js'][142]++;
  canvas.onmousemove = doMouseMove;
  _$jscoverage['easy_domino_play.js'][143]++;
  canvas.onmouseup = doMouseUp;
  _$jscoverage['easy_domino_play.js'][144]++;
  canvas.onmousewheel = doMouseWheel;
  _$jscoverage['easy_domino_play.js'][145]++;
  document.onkeyup = (function (event) {
  _$jscoverage['easy_domino_play.js'][146]++;
  if ((event.keyCode === 32)) {
    _$jscoverage['easy_domino_play.js'][148]++;
    global.curPlayer = ((global.curPlayer + 1) % global.playerNameList.length);
  }
});
  _$jscoverage['easy_domino_play.js'][151]++;
  alert("\u00e6\u00b8\u00b8\u00e6\u0088\u008f\u00e5\u00bc\u0080\u00e5\u00a7\u008b\u00ef\u00bc\u008c\u00e6\u008b\u0096\u00e5\u008a\u00a8\u00e5\u0087\u00ba\u00e7\u0089\u008c\u00ef\u00bc\u008c\u00e6\u00bb\u009a\u00e8\u00bd\u00ae\u00e6\u0094\u00b9\u00e5\u008f\u0098\u00e6\u0096\u00b9\u00e5\u0090\u0091\u00ef\u00bc\u008c\u00e7\u00a9\u00ba\u00e6\u00a0\u00bc\u00e8\u00b7\u00b3\u00e8\u00bf\u0087");
}
_$jscoverage['easy_domino_play.js'][153]++;
function doMouseDown(event) {
  _$jscoverage['easy_domino_play.js'][154]++;
  var resize = getResize();
  _$jscoverage['easy_domino_play.js'][155]++;
  if ((event.offsetY > ((resize.screenHeight * 2) / 3))) {
    _$jscoverage['easy_domino_play.js'][156]++;
    var index = touchBoneInHand(event.offsetX, event.offsetY, resize);
    _$jscoverage['easy_domino_play.js'][158]++;
    if ((index !== null)) {
      _$jscoverage['easy_domino_play.js'][160]++;
      var mBone = global.bonesInHand[index];
      _$jscoverage['easy_domino_play.js'][162]++;
      global.bonesOfPlayer[global.curPlayer].splice(index, 1);
      _$jscoverage['easy_domino_play.js'][164]++;
      global.movingBonex = {type: "bone", value: getResource("boneset"), bone: mBone, d: global.bonesInHandDirect, x: event.offsetX, y: event.offsetY, w: resize.boneScreenWidthOnTable, h: resize.boneScreenHeightOnTable};
    }
  }
}
_$jscoverage['easy_domino_play.js'][169]++;
function doMouseMove(event) {
  _$jscoverage['easy_domino_play.js'][171]++;
  if ((((typeof global.movingBonex) !== "undefined") && (global.movingBonex !== null))) {
    _$jscoverage['easy_domino_play.js'][172]++;
    global.movingBonex.x = event.offsetX;
    _$jscoverage['easy_domino_play.js'][172]++;
    global.movingBonex.y = event.offsetY;
  }
}
_$jscoverage['easy_domino_play.js'][175]++;
function doMouseUp(event) {
  _$jscoverage['easy_domino_play.js'][176]++;
  if ((((typeof global.movingBonex) !== "undefined") && (global.movingBonex !== null))) {
    _$jscoverage['easy_domino_play.js'][177]++;
    var resize = getResize();
    _$jscoverage['easy_domino_play.js'][179]++;
    if ((event.offsetY > ((resize.screenHeight * 2) / 3))) {
      _$jscoverage['easy_domino_play.js'][180]++;
      global.bonesOfPlayer[global.curPlayer].push(global.movingBonex.bone);
      _$jscoverage['easy_domino_play.js'][181]++;
      global.movingBonex = null;
    }
    else {
      _$jscoverage['easy_domino_play.js'][186]++;
      var detectResult = detectBranchend(event.offsetX, event.offsetY);
      _$jscoverage['easy_domino_play.js'][187]++;
      if (detectResult) {
        _$jscoverage['easy_domino_play.js'][188]++;
        touchBoneOnTable(event.offsetX, event.offsetY);
        _$jscoverage['easy_domino_play.js'][190]++;
        var pos = getXYPos(event.offsetX, event.offsetY, resize);
        _$jscoverage['easy_domino_play.js'][191]++;
        global.movingBonex.xPos = pos.x;
        _$jscoverage['easy_domino_play.js'][192]++;
        global.movingBonex.yPos = pos.y;
        _$jscoverage['easy_domino_play.js'][193]++;
        global.resourceHolder.debug = ("put bone on " + global.movingBonex.xPos + ", " + global.movingBonex.yPos);
        _$jscoverage['easy_domino_play.js'][194]++;
        global.bonexesOnTable.push(global.movingBonex);
        _$jscoverage['easy_domino_play.js'][196]++;
        global.branchends[detectResult] = null;
        _$jscoverage['easy_domino_play.js'][198]++;
        if ((getResource("dlist")[global.movingBonex.d] === "h+")) {
          _$jscoverage['easy_domino_play.js'][199]++;
          addBranchend((pos.x + 1.5), pos.y, global.movingBonex.bone.getNum1());
          _$jscoverage['easy_domino_play.js'][200]++;
          addBranchend((pos.x - 1.5), pos.y, global.movingBonex.bone.getNum2());
        }
        else {
          _$jscoverage['easy_domino_play.js'][201]++;
          if ((getResource("dlist")[global.movingBonex.d] === "h-")) {
            _$jscoverage['easy_domino_play.js'][202]++;
            addBranchend((pos.x - 1.5), pos.y, global.movingBonex.bone.getNum1());
            _$jscoverage['easy_domino_play.js'][203]++;
            addBranchend((pos.x + 1.5), pos.y, global.movingBonex.bone.getNum2());
          }
          else {
            _$jscoverage['easy_domino_play.js'][206]++;
            if ((getResource("dlist")[global.movingBonex.d] === "v+")) {
              _$jscoverage['easy_domino_play.js'][207]++;
              addBranchend(pos.x, (pos.y - 1.5), global.movingBonex.bone.getNum1());
              _$jscoverage['easy_domino_play.js'][208]++;
              addBranchend(pos.x, (pos.y + 1.5), global.movingBonex.bone.getNum2());
            }
            else {
              _$jscoverage['easy_domino_play.js'][209]++;
              if ((getResource("dlist")[global.movingBonex.d] === "v-")) {
                _$jscoverage['easy_domino_play.js'][210]++;
                addBranchend(pos.x, (pos.y + 1.5), global.movingBonex.bone.getNum1());
                _$jscoverage['easy_domino_play.js'][211]++;
                addBranchend(pos.x, (pos.y - 1.5), global.movingBonex.bone.getNum2());
              }
            }
          }
        }
        _$jscoverage['easy_domino_play.js'][214]++;
        global.scores[global.curPlayer] += 1;
        _$jscoverage['easy_domino_play.js'][215]++;
        global.movingBonex = null;
        _$jscoverage['easy_domino_play.js'][217]++;
        global.curPlayer = ((global.curPlayer + 1) % global.playerNameList.length);
      }
      else {
        _$jscoverage['easy_domino_play.js'][221]++;
        global.bonesOfPlayer[global.curPlayer].push(global.movingBonex.bone);
        _$jscoverage['easy_domino_play.js'][222]++;
        global.movingBonex = null;
      }
    }
  }
}
_$jscoverage['easy_domino_play.js'][227]++;
function doMouseWheel(event) {
  _$jscoverage['easy_domino_play.js'][229]++;
  if ((event.wheelDelta > 10)) {
    _$jscoverage['easy_domino_play.js'][231]++;
    global.movingBonex.d = (((global.movingBonex.d + getResource("dlist").length) - 1) % getResource("dlist").length);
  }
  else {
    _$jscoverage['easy_domino_play.js'][232]++;
    if ((event.wheelDelta < 10)) {
      _$jscoverage['easy_domino_play.js'][234]++;
      global.movingBonex.d = ((global.movingBonex.d + getResource("dlist").length + 1) % getResource("dlist").length);
    }
  }
}
_$jscoverage['easy_domino_play.js'][237]++;
function detectBranchend(x, y) {
  _$jscoverage['easy_domino_play.js'][238]++;
  var pos = getXYPos(x, y, getResize());
  _$jscoverage['easy_domino_play.js'][239]++;
  var dPosList = [];
  _$jscoverage['easy_domino_play.js'][241]++;
  if ((getResource("dlist")[global.movingBonex.d] === "h+")) {
    _$jscoverage['easy_domino_play.js'][242]++;
    if ((global.movingBonex.bone.getNum1() === global.movingBonex.bone.getNum2())) {
      _$jscoverage['easy_domino_play.js'][243]++;
      dPosList.push({value: global.movingBonex.bone.getNum1(), x: pos.x, y: pos.y});
    }
    _$jscoverage['easy_domino_play.js'][245]++;
    dPosList.push({value: global.movingBonex.bone.getNum1(), x: (pos.x + 0.5), y: pos.y});
    _$jscoverage['easy_domino_play.js'][246]++;
    dPosList.push({value: global.movingBonex.bone.getNum2(), x: (pos.x - 0.5), y: pos.y});
  }
  else {
    _$jscoverage['easy_domino_play.js'][247]++;
    if ((getResource("dlist")[global.movingBonex.d] === "h-")) {
      _$jscoverage['easy_domino_play.js'][248]++;
      if ((global.movingBonex.bone.getNum1() === global.movingBonex.bone.getNum2())) {
        _$jscoverage['easy_domino_play.js'][249]++;
        dPosList.push({value: global.movingBonex.bone.getNum1(), x: pos.x, y: pos.y});
      }
      _$jscoverage['easy_domino_play.js'][251]++;
      dPosList.push({value: global.movingBonex.bone.getNum1(), x: (pos.x - 0.5), y: pos.y});
      _$jscoverage['easy_domino_play.js'][252]++;
      dPosList.push({value: global.movingBonex.bone.getNum2(), x: (pos.x + 0.5), y: pos.y});
    }
    else {
      _$jscoverage['easy_domino_play.js'][255]++;
      if ((getResource("dlist")[global.movingBonex.d] === "v+")) {
        _$jscoverage['easy_domino_play.js'][256]++;
        if ((global.movingBonex.bone.getNum1() === global.movingBonex.bone.getNum2())) {
          _$jscoverage['easy_domino_play.js'][257]++;
          dPosList.push({value: global.movingBonex.bone.getNum1(), x: pos.x, y: pos.y});
        }
        _$jscoverage['easy_domino_play.js'][259]++;
        dPosList.push({value: global.movingBonex.bone.getNum1(), x: pos.x, y: (pos.y - 0.5)});
        _$jscoverage['easy_domino_play.js'][260]++;
        dPosList.push({value: global.movingBonex.bone.getNum2(), x: pos.x, y: (pos.y + 0.5)});
      }
      else {
        _$jscoverage['easy_domino_play.js'][261]++;
        if ((getResource("dlist")[global.movingBonex.d] === "v-")) {
          _$jscoverage['easy_domino_play.js'][262]++;
          if ((global.movingBonex.bone.getNum1() === global.movingBonex.bone.getNum2())) {
            _$jscoverage['easy_domino_play.js'][263]++;
            dPosList.push({value: global.movingBonex.bone.getNum1(), x: pos.x, y: pos.y});
          }
          _$jscoverage['easy_domino_play.js'][265]++;
          dPosList.push({value: global.movingBonex.bone.getNum1(), x: pos.x, y: (pos.y + 0.5)});
          _$jscoverage['easy_domino_play.js'][266]++;
          dPosList.push({value: global.movingBonex.bone.getNum2(), x: pos.x, y: (pos.y - 0.5)});
        }
      }
    }
  }
  _$jscoverage['easy_domino_play.js'][268]++;
  for (var i = 0; (i < dPosList.length); (i++)) {
    _$jscoverage['easy_domino_play.js'][269]++;
    var str = posToString({x: dPosList[i].x, y: dPosList[i].y});
    _$jscoverage['easy_domino_play.js'][270]++;
    if ((global.branchends[str] === dPosList[i].value)) {
      _$jscoverage['easy_domino_play.js'][271]++;
      return str;
    }
}
  _$jscoverage['easy_domino_play.js'][274]++;
  return false;
}
_$jscoverage['easy_domino_play.js'][276]++;
function getXYPos(x, y, resize) {
  _$jscoverage['easy_domino_play.js'][277]++;
  var ret = {};
  _$jscoverage['easy_domino_play.js'][278]++;
  var xDiff = (x - (resize.screenWidth / 2)), yDiff = (y - (resize.screenHeight / 3));
  _$jscoverage['easy_domino_play.js'][279]++;
  if ((xDiff > 0)) {
    _$jscoverage['easy_domino_play.js'][279]++;
    ret.x = (parseInt(((xDiff + (resize.boneScreenWidthOnTable / 4)) / (resize.boneScreenWidthOnTable / 2))) / 2);
  }
  else {
    _$jscoverage['easy_domino_play.js'][280]++;
    ret.x = (parseInt(((xDiff - (resize.boneScreenWidthOnTable / 4)) / (resize.boneScreenWidthOnTable / 2))) / 2);
  }
  _$jscoverage['easy_domino_play.js'][281]++;
  if ((yDiff > 0)) {
    _$jscoverage['easy_domino_play.js'][281]++;
    ret.y = (parseInt(((yDiff + (resize.boneScreenWidthOnTable / 4)) / (resize.boneScreenWidthOnTable / 2))) / 2);
  }
  else {
    _$jscoverage['easy_domino_play.js'][282]++;
    ret.y = (parseInt(((yDiff - (resize.boneScreenWidthOnTable / 4)) / (resize.boneScreenWidthOnTable / 2))) / 2);
  }
  _$jscoverage['easy_domino_play.js'][283]++;
  return ret;
}
_$jscoverage['easy_domino_play.js'][285]++;
function posToString(pos) {
  _$jscoverage['easy_domino_play.js'][286]++;
  return (pos.x + "|" + pos.y);
}
_$jscoverage['easy_domino_play.js'][288]++;
function addBranchend(xPos, yPos, value) {
  _$jscoverage['easy_domino_play.js'][289]++;
  var resize = getResize();
  _$jscoverage['easy_domino_play.js'][290]++;
  if ((touchBoneOnTable(((resize.screenWidth / 2) + (resize.boneScreenWidthOnTable * xPos)), ((resize.screenHeight / 3) + (resize.boneScreenWidthOnTable * yPos)), resize) === null)) {
    _$jscoverage['easy_domino_play.js'][292]++;
    global.branchends[posToString({x: xPos, y: yPos})] = value;
  }
}
_$jscoverage['easy_domino_play.js'][300]++;
function getResource(name) {
  _$jscoverage['easy_domino_play.js'][301]++;
  return global.resourceHolder[name];
}
_$jscoverage['easy_domino_play.js'][305]++;
function getResize() {
  _$jscoverage['easy_domino_play.js'][306]++;
  if (((typeof global.body) === "undefined")) {
    _$jscoverage['easy_domino_play.js'][306]++;
    global.body = document.getElementById(global.bodyId);
  }
  _$jscoverage['easy_domino_play.js'][307]++;
  var resize = {};
  _$jscoverage['easy_domino_play.js'][308]++;
  resize.screenWidth = global.body.offsetWidth;
  _$jscoverage['easy_domino_play.js'][308]++;
  resize.screenHeight = global.body.offsetHeight;
  _$jscoverage['easy_domino_play.js'][309]++;
  var boneScreenWidth = ((getResource("bonesetparam").w * resize.screenWidth) / 670 / 3);
  _$jscoverage['easy_domino_play.js'][310]++;
  var boneScreenHeight = (boneScreenWidth * 2);
  _$jscoverage['easy_domino_play.js'][311]++;
  resize.boneScreenWidthOnTable = boneScreenWidth;
  _$jscoverage['easy_domino_play.js'][312]++;
  resize.boneScreenHeightOnTable = boneScreenHeight;
  _$jscoverage['easy_domino_play.js'][313]++;
  resize.boneScreenWidthInHand = (boneScreenWidth * 1.5);
  _$jscoverage['easy_domino_play.js'][314]++;
  resize.boneScreenHeightInHand = (boneScreenHeight * 1.5);
  _$jscoverage['easy_domino_play.js'][315]++;
  return resize;
}
_$jscoverage['easy_domino_play.js'][319]++;
function drawUI() {
  _$jscoverage['easy_domino_play.js'][321]++;
  var resize = getResize();
  _$jscoverage['easy_domino_play.js'][323]++;
  canvas.setAttribute("width", resize.screenWidth);
  _$jscoverage['easy_domino_play.js'][323]++;
  canvas.setAttribute("height", resize.screenHeight);
  _$jscoverage['easy_domino_play.js'][325]++;
  var drawlist = [];
  _$jscoverage['easy_domino_play.js'][327]++;
  drawlist.push({type: "imgtile", value: getResource("background"), x: 0, y: 0, w: resize.screenWidth, h: resize.screenHeight});
  _$jscoverage['easy_domino_play.js'][329]++;
  global.bonesInHand = global.bonesOfPlayer[global.curPlayer].slice();
  _$jscoverage['easy_domino_play.js'][330]++;
  drawlist.push({type: "imgtile", value: getResource("handpanel"), x: 0, y: ((resize.screenHeight * 2) / 3), w: resize.screenWidth, h: (resize.screenHeight / 3)});
  _$jscoverage['easy_domino_play.js'][333]++;
  for (var i = 0; (i < global.bonexesOnTable.length); (i++)) {
    _$jscoverage['easy_domino_play.js'][334]++;
    var tBone = global.bonexesOnTable[i];
    _$jscoverage['easy_domino_play.js'][335]++;
    drawlist.push({type: "bone", value: getResource("boneset"), bone: tBone.bone, d: tBone.d, x: ((resize.screenWidth / 2) + (resize.boneScreenWidthOnTable * tBone.xPos)), y: ((resize.screenHeight / 3) + ((resize.boneScreenHeightOnTable / 2) * tBone.yPos)), w: resize.boneScreenWidthOnTable, h: resize.boneScreenHeightOnTable});
}
  _$jscoverage['easy_domino_play.js'][341]++;
  for (var i = 0; (i < global.bonesInHand.length); (i++)) {
    _$jscoverage['easy_domino_play.js'][342]++;
    var hBone = global.bonesInHand[i];
    _$jscoverage['easy_domino_play.js'][343]++;
    drawlist.push({type: "bone", value: getResource("boneset"), bone: hBone, d: global.bonesInHandDirect, x: ((resize.screenWidth / (global.bonesInHand.length + 1)) * (i + 1)), y: ((resize.screenHeight * 5) / 6), w: resize.boneScreenWidthInHand, h: resize.boneScreenHeightInHand});
}
  _$jscoverage['easy_domino_play.js'][350]++;
  if ((((typeof global.movingBonex) !== "undefined") && (global.movingBonex !== null))) {
    _$jscoverage['easy_domino_play.js'][351]++;
    var pos = getXYPos(global.movingBonex.x, global.movingBonex.y, resize);
    _$jscoverage['easy_domino_play.js'][352]++;
    if (((getResource("dlist")[global.movingBonex.d] == "v+") || (getResource("dlist")[global.movingBonex.d] == "v-"))) {
      _$jscoverage['easy_domino_play.js'][353]++;
      drawlist.push({type: "strokerect", value: "#0000FF", x: ((resize.screenWidth / 2) + (resize.boneScreenWidthOnTable * (pos.x - 0.5))), y: ((resize.screenHeight / 3) + ((resize.boneScreenHeightOnTable / 2) * (pos.y - 1))), w: global.movingBonex.w, h: global.movingBonex.h});
    }
    else {
      _$jscoverage['easy_domino_play.js'][359]++;
      drawlist.push({type: "strokerect", value: "#0000FF", x: ((resize.screenWidth / 2) + (resize.boneScreenWidthOnTable * (pos.x - 1))), y: ((resize.screenHeight / 3) + (resize.boneScreenWidthOnTable * (pos.y - 0.5))), w: global.movingBonex.h, h: global.movingBonex.w});
    }
  }
  _$jscoverage['easy_domino_play.js'][367]++;
  if ((((typeof global.movingBonex) !== "undefined") && (global.movingBonex !== null))) {
    _$jscoverage['easy_domino_play.js'][368]++;
    drawlist.push(global.movingBonex);
  }
  _$jscoverage['easy_domino_play.js'][371]++;
  var score = "";
  _$jscoverage['easy_domino_play.js'][372]++;
  for (var i = 0; (i < global.boneyard.getPlayers().length); (i++)) {
    _$jscoverage['easy_domino_play.js'][373]++;
    score = (score + " " + global.boneyard.getPlayers()[i].getPlayerName() + " " + global.scores[i] + "\u00e5\u0088\u0086 ");
}
  _$jscoverage['easy_domino_play.js'][376]++;
  drawlist.push({type: "text", value: score, x: 0, y: 40, font: "20px Courier New", color: "red"});
  _$jscoverage['easy_domino_play.js'][377]++;
  drawlist.push({type: "text", value: (" current " + global.playerNameList[global.curPlayer]), x: 0, y: 20, font: "20px Courier New", color: "blue"});
  _$jscoverage['easy_domino_play.js'][379]++;
  context.fillStyle = "#FFFFFF";
  _$jscoverage['easy_domino_play.js'][379]++;
  context.fillRect(0, 0, resize.screenWidth, resize.screenHeight);
  _$jscoverage['easy_domino_play.js'][381]++;
  for (var i = 0; (i < drawlist.length); (i++)) {
    _$jscoverage['easy_domino_play.js'][382]++;
    drawItem(drawlist[i]);
}
}
_$jscoverage['easy_domino_play.js'][385]++;
function drawItem(item) {
  _$jscoverage['easy_domino_play.js'][386]++;
  switch (item.type) {
  case "imgtile":
    _$jscoverage['easy_domino_play.js'][388]++;
    context.beginPath();
    _$jscoverage['easy_domino_play.js'][389]++;
    context.rect(item.x, item.y, item.w, item.h);
    _$jscoverage['easy_domino_play.js'][390]++;
    context.fillStyle = context.createPattern(item.value, "repeat");
    _$jscoverage['easy_domino_play.js'][391]++;
    context.fill();
    _$jscoverage['easy_domino_play.js'][392]++;
    break;
  case "bone":
    _$jscoverage['easy_domino_play.js'][394]++;
    var param = getResource("bonesetparam");
    _$jscoverage['easy_domino_play.js'][395]++;
    var r;
    _$jscoverage['easy_domino_play.js'][396]++;
    if ((getResource("dlist")[item.d] === "h+")) {
      _$jscoverage['easy_domino_play.js'][396]++;
      r = 90;
    }
    else {
      _$jscoverage['easy_domino_play.js'][397]++;
      if ((getResource("dlist")[item.d] === "h-")) {
        _$jscoverage['easy_domino_play.js'][397]++;
        r = -90;
      }
      else {
        _$jscoverage['easy_domino_play.js'][398]++;
        if ((getResource("dlist")[item.d] === "v+")) {
          _$jscoverage['easy_domino_play.js'][398]++;
          r = 0;
        }
        else {
          _$jscoverage['easy_domino_play.js'][399]++;
          if ((getResource("dlist")[item.d] === "v-")) {
            _$jscoverage['easy_domino_play.js'][399]++;
            r = 180;
          }
        }
      }
    }
    _$jscoverage['easy_domino_play.js'][400]++;
    drawBone(item.value, (item.bone.getNum1() * param.x), (item.bone.getNum2() * param.y), param.w, param.h, item.x, item.y, item.w, item.h, r);
    _$jscoverage['easy_domino_play.js'][402]++;
    break;
  case "text":
    _$jscoverage['easy_domino_play.js'][404]++;
    context.font = item.font;
    _$jscoverage['easy_domino_play.js'][405]++;
    context.fillStyle = item.color;
    _$jscoverage['easy_domino_play.js'][406]++;
    context.fillText(item.value, item.x, item.y);
    _$jscoverage['easy_domino_play.js'][407]++;
    break;
  case "strokerect":
    _$jscoverage['easy_domino_play.js'][409]++;
    context.save();
    _$jscoverage['easy_domino_play.js'][410]++;
    context.strokeStyle = item.value;
    _$jscoverage['easy_domino_play.js'][411]++;
    context.strokeRect(item.x, item.y, item.w, item.h);
    _$jscoverage['easy_domino_play.js'][412]++;
    context.restore();
    _$jscoverage['easy_domino_play.js'][413]++;
    break;
  }
}
_$jscoverage['easy_domino_play.js'][421]++;
function drawBone(img, sx, sy, sw, sh, x, y, w, h, r) {
  _$jscoverage['easy_domino_play.js'][422]++;
  context.save();
  _$jscoverage['easy_domino_play.js'][423]++;
  var r0 = ((r * Math.PI) / 180);
  _$jscoverage['easy_domino_play.js'][424]++;
  context.translate(x, y);
  _$jscoverage['easy_domino_play.js'][425]++;
  context.rotate(r0);
  _$jscoverage['easy_domino_play.js'][426]++;
  context.translate(((- w) / 2), ((- h) / 2));
  _$jscoverage['easy_domino_play.js'][427]++;
  context.drawImage(img, sx, sy, sw, sh, 0, 0, w, h);
  _$jscoverage['easy_domino_play.js'][428]++;
  context.restore();
}
_$jscoverage['easy_domino_play.js'][432]++;
function touchBoneOnTable(x, y, resize) {
  _$jscoverage['easy_domino_play.js'][433]++;
  var r = null;
  _$jscoverage['easy_domino_play.js'][435]++;
  var resize = getResize();
  _$jscoverage['easy_domino_play.js'][436]++;
  for (var i = 0; (i < global.bonexesOnTable.length); (i++)) {
    _$jscoverage['easy_domino_play.js'][437]++;
    var tBone = global.bonexesOnTable[i];
    _$jscoverage['easy_domino_play.js'][438]++;
    var tW, tH;
    _$jscoverage['easy_domino_play.js'][439]++;
    if (((getResource("dlist")[tBone.d] === "v+") || (getResource("dlist")[tBone.d] === "v-"))) {
      _$jscoverage['easy_domino_play.js'][440]++;
      tW = resize.boneScreenWidthOnTable;
      _$jscoverage['easy_domino_play.js'][441]++;
      tH = resize.boneScreenHeightOnTable;
    }
    else {
      _$jscoverage['easy_domino_play.js'][443]++;
      tW = resize.boneScreenHeightOnTable;
      _$jscoverage['easy_domino_play.js'][444]++;
      tH = resize.boneScreenWidthOnTable;
    }
    _$jscoverage['easy_domino_play.js'][446]++;
    var tX = (((resize.boneScreenWidthOnTable * tBone.xPos) + (resize.screenWidth / 2)) - (tW / 2));
    _$jscoverage['easy_domino_play.js'][447]++;
    var tY = (((resize.boneScreenWidthOnTable * tBone.yPos) + (resize.screenHeight / 3)) - (tH / 2));
    _$jscoverage['easy_domino_play.js'][449]++;
    switch (getResource("dlist")[tBone.d]) {
    case "v+":
      _$jscoverage['easy_domino_play.js'][451]++;
      if (((x > tX) && (x < (tX + tW)))) {
        _$jscoverage['easy_domino_play.js'][452]++;
        if (((y > tY) && (y < (tY + (tH / 2))))) {
          _$jscoverage['easy_domino_play.js'][452]++;
          r = {num: global.bonexesOnTable[i].bone.getNum1(), index: i, t: "up"};
        }
        else {
          _$jscoverage['easy_domino_play.js'][453]++;
          if (((y > (tY + (tH / 2))) && (y < (tY + tH)))) {
            _$jscoverage['easy_domino_play.js'][453]++;
            r = {num: global.bonexesOnTable[i].bone.getNum2(), index: i, t: "down"};
          }
        }
      }
      _$jscoverage['easy_domino_play.js'][455]++;
      break;
    case "v-":
      _$jscoverage['easy_domino_play.js'][457]++;
      if (((x > tX) && (x < (tX + tW)))) {
        _$jscoverage['easy_domino_play.js'][458]++;
        if (((y > tY) && (y < (tY + (tH / 2))))) {
          _$jscoverage['easy_domino_play.js'][458]++;
          r = {num: global.bonexesOnTable[i].bone.getNum2(), index: i, t: "up"};
        }
        else {
          _$jscoverage['easy_domino_play.js'][459]++;
          if (((y > (tY + (tH / 2))) && (y < (tY + tH)))) {
            _$jscoverage['easy_domino_play.js'][459]++;
            r = {num: global.bonexesOnTable[i].bone.getNum1(), index: i, t: "down"};
          }
        }
      }
      _$jscoverage['easy_domino_play.js'][461]++;
      break;
    case "h+":
      _$jscoverage['easy_domino_play.js'][463]++;
      if (((y > tY) && (y < (tY + tH)))) {
        _$jscoverage['easy_domino_play.js'][464]++;
        if (((x > tX) && (x < (tX + (tW / 2))))) {
          _$jscoverage['easy_domino_play.js'][464]++;
          r = {num: global.bonexesOnTable[i].bone.getNum2(), index: i, t: "left"};
        }
        else {
          _$jscoverage['easy_domino_play.js'][465]++;
          if (((x > (tX + (tW / 2))) && (x < (tX + tW)))) {
            _$jscoverage['easy_domino_play.js'][465]++;
            r = {num: global.bonexesOnTable[i].bone.getNum1(), index: i, t: "right"};
          }
        }
      }
      _$jscoverage['easy_domino_play.js'][467]++;
      break;
    case "h-":
      _$jscoverage['easy_domino_play.js'][469]++;
      if (((y > tY) && (y < (tY + tH)))) {
        _$jscoverage['easy_domino_play.js'][470]++;
        if (((x > tX) && (x < (tX + (tW / 2))))) {
          _$jscoverage['easy_domino_play.js'][470]++;
          r = {num: global.bonexesOnTable[i].bone.getNum1(), index: i, t: "left"};
        }
        else {
          _$jscoverage['easy_domino_play.js'][471]++;
          if (((x > (tX + (tW / 2))) && (x < (tX + tW)))) {
            _$jscoverage['easy_domino_play.js'][471]++;
            r = {num: global.bonexesOnTable[i].bone.getNum2(), index: i, t: "right"};
          }
        }
      }
      _$jscoverage['easy_domino_play.js'][473]++;
      break;
    }
}
  _$jscoverage['easy_domino_play.js'][476]++;
  if ((r !== null)) {
    _$jscoverage['easy_domino_play.js'][477]++;
    global.resourceHolder.debug = (r.num + " at bonexesOnTable " + r.index + " to direction " + r.t);
  }
  _$jscoverage['easy_domino_play.js'][479]++;
  return r;
}
_$jscoverage['easy_domino_play.js'][481]++;
function touchBoneInHand(x, y, resize) {
  _$jscoverage['easy_domino_play.js'][482]++;
  for (var i = 0; (i < global.bonesInHand.length); (i++)) {
    _$jscoverage['easy_domino_play.js'][483]++;
    var hW = resize.boneScreenWidthInHand;
    _$jscoverage['easy_domino_play.js'][484]++;
    var hH = resize.boneScreenHeightInHand;
    _$jscoverage['easy_domino_play.js'][485]++;
    var hX = (((resize.screenWidth / (global.bonesInHand.length + 1)) * (i + 1)) - (hW / 2));
    _$jscoverage['easy_domino_play.js'][486]++;
    var hY = (((resize.screenHeight * 5) / 6) - (hH / 2));
    _$jscoverage['easy_domino_play.js'][487]++;
    if (((x > hX) && (x < (hX + hW)) && (y > hY) && (y < (hY + hH)))) {
      _$jscoverage['easy_domino_play.js'][487]++;
      return i;
    }
}
  _$jscoverage['easy_domino_play.js'][489]++;
  return null;
}
_$jscoverage['easy_domino_play.js'][493]++;
function getRandom(min, max) {
  _$jscoverage['easy_domino_play.js'][494]++;
  return (parseInt((Math.random() * ((max - min) + 1))) + min);
}
